(window["webpackJsonpGUI"] = window["webpackJsonpGUI"] || []).push([["addons"],{

/***/ "./node_modules/css-loader/index.js!./src/addons/addons/drag-drop/dragged-over.css":
/*!********************************************************************************!*\
  !*** ./node_modules/css-loader!./src/addons/addons/drag-drop/dragged-over.css ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../../node_modules/css-loader/lib/css-base.js */ "./node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, "/* Based on the `stage-selector_raised` class */\ndiv[class*=\"stage-selector_header_\"],\ndiv[class*=\"sprite-selector_sprite-selector\"],\ndiv[class*=\"sprite-info_sprite-info\"],\ndiv[class*=\"monitor_list-body\"] {\n  transition: background-color 0.25s ease;\n}\n.sa-dragged-over,\n.sa-dragged-over div[class*=\"stage-selector_header_\"],\n.sa-dragged-over div[class*=\"sprite-info_sprite-info\"],\n.sa-dragged-over div[class*=\"monitor_list-body\"] {\n  background-color: hsla(0, 100%, 77%, 1) !important;\n}\n", ""]);

// exports


/***/ }),

/***/ "./node_modules/css-loader/index.js!./src/addons/addons/pause/style.css":
/*!*********************************************************************!*\
  !*** ./node_modules/css-loader!./src/addons/addons/pause/style.css ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../../node_modules/css-loader/lib/css-base.js */ "./node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".pause-btn {\n  width: 2rem;\n  height: 2rem;\n  padding: 0.375rem;\n  border-radius: 0.25rem;\n  user-select: none;\n  user-drag: none;\n  cursor: pointer;\n}\n\n.pause-btn:hover {\n  background-color: hsla(0, 100%, 65%, 0.15);\n}\n", ""]);

// exports


/***/ }),

/***/ "./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./src/addons/modal.css":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/css-loader??ref--5-1!./node_modules/postcss-loader/src??postcss!./src/addons/modal.css ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../node_modules/css-loader/lib/css-base.js */ "./node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".modal_modal-content_fN1pD {\n  background-color: white;\n  color: #575e75;\n}\n[theme=\"dark\"] .modal_modal-content_fN1pD {\n  background-color: var(--ui-primary);\n  color: var(--text-primary);\n}\n", ""]);

// exports
exports.locals = {
	"modal-content": "modal_modal-content_fN1pD",
	"modalContent": "modal_modal-content_fN1pD"
};

/***/ }),

/***/ "./node_modules/url-loader/dist/cjs.js!./src/addons/addons/mute-project/icon--mute.svg":
/*!*********************************************************************************************!*\
  !*** ./node_modules/url-loader/dist/cjs.js!./src/addons/addons/mute-project/icon--mute.svg ***!
  \*********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEZyb20gaHR0cHM6Ly9naXRodWIuY29tL0xMSy9zY3JhdGNoLWd1aS8gLS0+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5Tb3VuZC9FZmZlY3RzL011dGU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iU291bmQvRWZmZWN0cy9NdXRlIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBmaWxsPSIjQ0Y2M0NGIiBkPSJNMTMuNDU0MTc0OSw1LjA0ODE1MjQzIEwxNS42MjgxMTY4LDIuODc0MjEwNTQgQzE1LjkyMTAxLDIuNTgxMzE3MzIgMTYuMzk1ODgzNywyLjU4MTMxNzMyIDE2LjY4ODc3NywyLjg3NDIxMDU0IEMxNi45ODE2NzAyLDMuMTY3MTAzNzYgMTYuOTgxNjcwMiwzLjY0MTk3NzQ5IDE2LjY4ODc3NywzLjkzNDg3MDcxIEw0LjUzMDMzMDA5LDE2LjA5MzMxNzYgQzQuMjM3NDM2ODcsMTYuMzg2MjEwOCAzLjc2MjU2MzEzLDE2LjM4NjIxMDggMy40Njk2Njk5MSwxNi4wOTMzMTc2IEMzLjE3Njc3NjcsMTUuODAwNDI0NCAzLjE3Njc3NjcsMTUuMzI1NTUwNiAzLjQ2OTY2OTkxLDE1LjAzMjY1NzQgTDYuMzEyMTQ5MzIsMTIuMTkwMTc4IEM2LjEyNDExOTEsMTIuMDYyMTM3OSA2LDExLjg0NjMzMzEgNiwxMS42MDI5ODc1IEw2LDguNjM3NDg3NSBDNiw4LjI0NzExMjUgNi4zMTk0MTUyNyw3LjkyNzYxMjUgNi43MDk2ODY3NSw3LjkyNzYxMjUgTDcuMDI0NjAzMjIsNy45Mjc2MTI1IEM4Ljc1Nzc2ODQ4LDcuOTI3NjEyNSAxMC4yOTQxMTEsNi44MTM4NjI1IDEwLjgzMzk2NzgsNS4xNjY4NjI1IEMxMC45Mjk1Njc0LDQuODc0MzYyNSAxMS4yMDE3NDUyLDQuNjc3NDg3NSAxMS41MDc2NjQxLDQuNjc3NDg3NSBMMTIuODMxNDM3OSw0LjY3NzQ4NzUgQzEzLjEwMDI4NDQsNC42Nzc0ODc1IDEzLjMzNDEwNzUsNC44MjcxNzIwOCAxMy40NTQxNzQ5LDUuMDQ4MTUyNDMgWiBNMTMuNTQsOS4wODM2NDc3MSBMMTMuNTQsMTQuODUzMTEyNSBDMTMuNTQsMTUuMjQ1NzM3NSAxMy4yMjI4MzQxLDE1LjU2Mjk4NzUgMTIuODMxNDM3OSwxNS41NjI5ODc1IEwxMS41MDc2NjQxLDE1LjU2Mjk4NzUgQzExLjIwMTc0NTIsMTUuNTYyOTg3NSAxMC45Mjk1Njc0LDE1LjM2NjExMjUgMTAuODMzOTY3OCwxNS4wNzM2MTI1IEMxMC41NzczNzg1LDE0LjI5MDgwNzcgMTAuMDk1NjgxMywxMy42Mjg0NjUgOS40NzQ3MzUzMSwxMy4xNDg5MTI0IEwxMy41NCw5LjA4MzY0NzcxIFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+Cg==");

/***/ }),

/***/ "./node_modules/url-loader/dist/cjs.js!./src/addons/addons/pause/pause.svg":
/*!*********************************************************************************!*\
  !*** ./node_modules/url-loader/dist/cjs.js!./src/addons/addons/pause/pause.svg ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTM3IiBoZWlnaHQ9IjE0MCIgdmlld0JveD0iMCAwIDEzNyAxNDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik01Mi4xNDQgMTJDNTIuMTQ0IDkuNzkwODYgNTAuMzUzMSA4IDQ4LjE0NCA4SDguMTQzOTVDNS45MzQ4MSA4IDQuMTQzOTUgOS43OTA4NiA0LjE0Mzk1IDEyVjEzMkM0LjE0Mzk1IDEzNC4yMDkgNS45MzQ4MSAxMzYgOC4xNDM5NSAxMzZINDguMTQ0QzUwLjM1MzEgMTM2IDUyLjE0NCAxMzQuMjA5IDUyLjE0NCAxMzJWMTJaIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utb3BhY2l0eT0iMC4yNSIgc3Ryb2tlLXdpZHRoPSI4Ii8+CjxwYXRoIGQ9Ik04OC4xNDQgOEM4NS45MzQ4IDggODQuMTQ0IDkuNzkwODYgODQuMTQ0IDEyVjEzMkM4NC4xNDQgMTM0LjIwOSA4NS45MzQ4IDEzNiA4OC4xNDQgMTM2SDEyOC4xNDRDMTMwLjM1MyAxMzYgMTMyLjE0NCAxMzQuMjA5IDEzMi4xNDQgMTMyVjEyQzEzMi4xNDQgOS43OTA4NiAxMzAuMzUzIDggMTI4LjE0NCA4SDg4LjE0NFoiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1vcGFjaXR5PSIwLjI1IiBzdHJva2Utd2lkdGg9IjgiLz4KPHBhdGggZD0iTTUyLjE0NCA4QzUyLjE0NCA1Ljc5MDg2IDUwLjM1MzEgNCA0OC4xNDQgNEg4LjE0Mzk1QzUuOTM0ODEgNCA0LjE0Mzk1IDUuNzkwODYgNC4xNDM5NSA4VjEyOEM0LjE0Mzk1IDEzMC4yMDkgNS45MzQ4MSAxMzIgOC4xNDM5NSAxMzJINDguMTQ0QzUwLjM1MzEgMTMyIDUyLjE0NCAxMzAuMjA5IDUyLjE0NCAxMjhWOFoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl81XzUxKSIvPgo8cGF0aCBkPSJNODguMTQ0IDRDODUuOTM0OCA0IDg0LjE0NCA1Ljc5MDg2IDg0LjE0NCA4VjEyOEM4NC4xNDQgMTMwLjIwOSA4NS45MzQ4IDEzMiA4OC4xNDQgMTMySDEyOC4xNDRDMTMwLjM1MyAxMzIgMTMyLjE0NCAxMzAuMjA5IDEzMi4xNDQgMTI4VjhDMTMyLjE0NCA1Ljc5MDg2IDEzMC4zNTMgNCAxMjguMTQ0IDRIODguMTQ0WiIgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzVfNTEpIi8+CjxwYXRoIGQ9Ik01Mi4xNDQgOEM1Mi4xNDQgNS43OTA4NiA1MC4zNTMxIDQgNDguMTQ0IDRIOC4xNDM5NUM1LjkzNDgxIDQgNC4xNDM5NSA1Ljc5MDg2IDQuMTQzOTUgOFYxMjhDNC4xNDM5NSAxMzAuMjA5IDUuOTM0ODEgMTMyIDguMTQzOTUgMTMySDQ4LjE0NEM1MC4zNTMxIDEzMiA1Mi4xNDQgMTMwLjIwOSA1Mi4xNDQgMTI4VjhaIiBzdHJva2U9IiNCRjkwMDAiIHN0cm9rZS13aWR0aD0iOCIvPgo8cGF0aCBkPSJNODguMTQ0IDRDODUuOTM0OCA0IDg0LjE0NCA1Ljc5MDg2IDg0LjE0NCA4VjEyOEM4NC4xNDQgMTMwLjIwOSA4NS45MzQ4IDEzMiA4OC4xNDQgMTMySDEyOC4xNDRDMTMwLjM1MyAxMzIgMTMyLjE0NCAxMzAuMjA5IDEzMi4xNDQgMTI4VjhDMTMyLjE0NCA1Ljc5MDg2IDEzMC4zNTMgNCAxMjguMTQ0IDRIODguMTQ0WiIgc3Ryb2tlPSIjQkY5MDAwIiBzdHJva2Utd2lkdGg9IjgiLz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl81XzUxIiB4MT0iNjguMTQ0IiB5MT0iNCIgeDI9IjY4LjE0NCIgeTI9IjEzMiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjRkZFRjIwIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0RGQkYwNSIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MV9saW5lYXJfNV81MSIgeDE9IjY4LjE0NCIgeTE9IjQiIHgyPSI2OC4xNDQiIHkyPSIxMzIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRUYyMCIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNERkJGMDUiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K");

/***/ }),

/***/ "./node_modules/url-loader/dist/cjs.js!./src/addons/addons/pause/play.svg":
/*!********************************************************************************!*\
  !*** ./node_modules/url-loader/dist/cjs.js!./src/addons/addons/pause/play.svg ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTE1IiBoZWlnaHQ9IjEzNiIgdmlld0JveD0iMCAwIDExNSAxMzYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xMDguODUxIDY2LjUzNTlDMTExLjUxOCA2OC4wNzU1IDExMS41MTggNzEuOTI0NSAxMDguODUxIDczLjQ2NDFMMTAgMTMwLjUzNkM3LjMzMzMzIDEzMi4wNzYgNCAxMzAuMTUxIDQgMTI3LjA3MlYxMi45MjgyQzQgOS44NDkwMSA3LjMzMzMzIDcuOTI0NSAxMCA5LjQ2NDFMMTA4Ljg1MSA2Ni41MzU5WiIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLW9wYWNpdHk9IjAuMjUiIHN0cm9rZS13aWR0aD0iOCIvPgo8cGF0aCBkPSJNMTA4Ljg1MSA2Mi41MzU5QzExMS41MTggNjQuMDc1NSAxMTEuNTE4IDY3LjkyNDUgMTA4Ljg1MSA2OS40NjQxTDEwIDEyNi41MzZDNy4zMzMzMyAxMjguMDc2IDQgMTI2LjE1MSA0IDEyMy4wNzJWOC45MjgyMUM0IDUuODQ5MDEgNy4zMzMzMyAzLjkyNDUgMTAgNS40NjQxTDEwOC44NTEgNjIuNTM1OVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl81XzQ4KSIgc3Ryb2tlPSIjMDA5MDA1IiBzdHJva2Utd2lkdGg9IjgiLz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl81XzQ4IiB4MT0iNTkuNDI1NiIgeTE9IjIiIHgyPSI1OS40MjU2IiB5Mj0iMTMwIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiMyNUZGMzAiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMDBERjA1Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==");

/***/ }),

/***/ "./src/addons/addons-l10n/en.json":
/*!****************************************!*\
  !*** ./src/addons/addons-l10n/en.json ***!
  \****************************************/
/*! exports provided: editor-devtools/bottom, editor-devtools/clean-plus, editor-devtools/code-tab-features, editor-devtools/copy-all, editor-devtools/copy-block, editor-devtools/copy-to-clipboard, editor-devtools/copy-to-clipboard-desc, editor-devtools/costume-tab-features, editor-devtools/ctrl-lr, editor-devtools/ctrl-lr-costume-desc, editor-devtools/ctrl-lr-desc, editor-devtools/ctrl-space, editor-devtools/ctrl-space-desc, editor-devtools/cut-block, editor-devtools/deep, editor-devtools/find, editor-devtools/find-bar, editor-devtools/find-bar-costume-desc, editor-devtools/find-placeholder, editor-devtools/help, editor-devtools/help-make-space, editor-devtools/help-make-space-desc, editor-devtools/help-new, editor-devtools/help-title, editor-devtools/improved-tidy-up, editor-devtools/improved-tidy-up-desc, editor-devtools/insert, editor-devtools/interactive-find-bar, editor-devtools/interactive-find-bar-desc, editor-devtools/lists, editor-devtools/make-space, editor-devtools/middleclick, editor-devtools/middleclick-desc, editor-devtools/orphaned, editor-devtools/paste, editor-devtools/paste-from-clipboard, editor-devtools/paste-from-clipboard-desc, editor-devtools/replace, editor-devtools/start-typing, editor-devtools/swap, editor-devtools/swap-variable, editor-devtools/swap-variable-desc, editor-devtools/top, editor-devtools/tutorials, editor-devtools/unused-list, editor-devtools/unused-var, editor-devtools/var-not-exist, editor-devtools/variables, editor-devtools/youtube, editor-searchable-dropdowns/createBroadcast, editor-searchable-dropdowns/createGlobalList, editor-searchable-dropdowns/createGlobalVariable, editor-searchable-dropdowns/createLocalList, editor-searchable-dropdowns/createLocalVariable, data-category-tweaks-v2/for-all-sprites, data-category-tweaks-v2/for-this-sprite-only, data-category-tweaks-v2/list-category, hide-flyout/lock, hide-flyout/unlock, mediarecorder/cancel, mediarecorder/click-flag, mediarecorder/click-flag-description, mediarecorder/option-title, mediarecorder/record, mediarecorder/record-after-flag, mediarecorder/record-audio, mediarecorder/record-audio-description, mediarecorder/record-description, mediarecorder/record-duration, mediarecorder/record-mic, mediarecorder/record-until-stop, mediarecorder/record-until-stop-disabled, mediarecorder/start, mediarecorder/start-delay, mediarecorder/starting-in, mediarecorder/stop, debugger/block-breakpoint, debugger/block-error, debugger/block-log, debugger/block-warn, debugger/cannot-pause-player, debugger/clear, debugger/clone-of, debugger/close, debugger/console, debugger/debug, debugger/empty-string, debugger/enter-format, debugger/export, debugger/export-desc, debugger/icon-error, debugger/icon-warn, debugger/log-msg-broadcasted, debugger/log-msg-clone-cap, debugger/log-msg-clone-created, debugger/log-msg-flag-clicked, debugger/no-logs, debugger/no-threads-running, debugger/step, debugger/step-desc, debugger/tab-logs, debugger/tab-threads, debugger/thread, debugger/unknown-sprite, debugger/unpause, pause/pause, clones/clones, color-picker/hex, remove-sprite-confirm/confirm, block-count/blocks, onion-skinning/behind, onion-skinning/front, onion-skinning/layering, onion-skinning/merge, onion-skinning/mode, onion-skinning/next, onion-skinning/opacity, onion-skinning/opacityStep, onion-skinning/previous, onion-skinning/settings, onion-skinning/tint, onion-skinning/toggle, 2d-color-picker/shade, better-img-uploads/upload, variable-manager/for-all-sprites, variable-manager/for-this-sprite, variable-manager/search, variable-manager/variables, search-sprites/placeholder, gamepad/axes-a-b, gamepad/axis-arrows, gamepad/axis-cursor, gamepad/axis-custom, gamepad/axis-none, gamepad/browser-support, gamepad/button-n, gamepad/clear, gamepad/config-header, gamepad/key-click, gamepad/key-down, gamepad/key-enter, gamepad/key-left, gamepad/key-none, gamepad/key-right, gamepad/key-space, gamepad/key-up, gamepad/keyinput-title, gamepad/no-controllers, gamepad/reset, gamepad/settings, gamepad/store-in-project, folders/add-to-folder, folders/closed-folder, folders/confirm-backpack-folder, folders/create-folder, folders/name-not-allowed, folders/name-prompt, folders/name-prompt-title, folders/open-folder, folders/remove-folder, folders/remove-from-folder, folders/rename-folder, folders/rename-folder-prompt, folders/rename-folder-prompt-title, block-switching/control_forever, block-switching/control_if, block-switching/control_if_else, block-switching/control_repeat_until, block-switching/control_wait_until, block-switching/data_changevariableby, block-switching/data_hidelist, block-switching/data_hidevariable, block-switching/data_insertatlist, block-switching/data_replaceitemoflist, block-switching/data_setvariableto, block-switching/data_showlist, block-switching/data_showvariable, block-switching/debugger_error, block-switching/debugger_log, block-switching/debugger_warn, block-switching/event_broadcast, block-switching/event_broadcastandwait, block-switching/looks_backdropnumbername, block-switching/looks_changeeffectby, block-switching/looks_changesizeby, block-switching/looks_costumenumbername, block-switching/looks_hide, block-switching/looks_nextbackdrop, block-switching/looks_nextcostume, block-switching/looks_say, block-switching/looks_sayforsecs, block-switching/looks_seteffectto, block-switching/looks_setsizeto, block-switching/looks_show, block-switching/looks_switchbackdropto, block-switching/looks_switchbackdroptoandwait, block-switching/looks_think, block-switching/looks_thinkforsecs, block-switching/motion_changexby, block-switching/motion_changeyby, block-switching/motion_setx, block-switching/motion_sety, block-switching/motion_turnleft, block-switching/motion_turnright, block-switching/motion_xposition, block-switching/motion_yposition, block-switching/music_changeTempo, block-switching/music_setTempo, block-switching/operator_add, block-switching/operator_and, block-switching/operator_divide, block-switching/operator_equals, block-switching/operator_gt, block-switching/operator_lt, block-switching/operator_mod, block-switching/operator_multiply, block-switching/operator_or, block-switching/operator_subtract, block-switching/pen_changePenColorParamBy, block-switching/pen_changePenHueBy, block-switching/pen_changePenShadeBy, block-switching/pen_changePenSizeBy, block-switching/pen_penDown, block-switching/pen_penUp, block-switching/pen_setPenColorParamTo, block-switching/pen_setPenHueToNumber, block-switching/pen_setPenShadeToNumber, block-switching/pen_setPenSizeTo, block-switching/sensing_mousex, block-switching/sensing_mousey, block-switching/sound_changeeffectby, block-switching/sound_changevolumeby, block-switching/sound_play, block-switching/sound_playuntildone, block-switching/sound_seteffectto, block-switching/sound_setvolumeto, blocks2image/error_blocks_not_added, blocks2image/export_all_to_PNG, blocks2image/export_all_to_SVG, blocks2image/export_selected_to_PNG, blocks2image/export_selected_to_SVG, editor-extra-keys/enter-key, move-to-top-bottom/bottom, move-to-top-bottom/top, swap-local-global/cant-convert-cloud, swap-local-global/cant-convert-conflict, swap-local-global/cant-convert-stage, swap-local-global/cant-convert-to-local, swap-local-global/cant-convert-used-elsewhere, swap-local-global/edit, swap-local-global/edit-list-header, swap-local-global/edit-list-option, swap-local-global/edit-variable-header, swap-local-global/edit-variable-option, swap-local-global/to-global, swap-local-global/to-local, hide-stage/hide-stage, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"editor-devtools/bottom\":\"send to bottom\",\"editor-devtools/clean-plus\":\"Clean up Blocks +\",\"editor-devtools/code-tab-features\":\"Code Tab Features\",\"editor-devtools/copy-all\":\"Copy All\",\"editor-devtools/copy-block\":\"Copy Block\",\"editor-devtools/copy-to-clipboard\":\"Copy to Clipboard\",\"editor-devtools/copy-to-clipboard-desc\":\"Right click a block and 3 new options are available to Copy All, Copy Block, and Cut Block. The Copy All will copy to the clipboard everything including and below the block you clicked on. Copy block will only copy the current block and its contents, but nothing below. And cut block will copy it and remove it from the code area.\",\"editor-devtools/costume-tab-features\":\"Costumes Tab Features\",\"editor-devtools/ctrl-lr\":\"Ctrl + Left, Ctrl + Right\",\"editor-devtools/ctrl-lr-costume-desc\":\"These keys navigate you to the previous / next costume in the sprite.\",\"editor-devtools/ctrl-lr-desc\":\"Navigate to previous / next visited position in the code area (after using the navigate to block or find bar). This allows you to middle click a custom block to go to its definition, then press ctrl + Left to go back to where you were before.\",\"editor-devtools/ctrl-space\":\"Ctrl + Space, Middle Click, or Shift + Click\",\"editor-devtools/ctrl-space-desc\":\"Pops up a floating input box where you can type the name of a block (or parts of it) and drag the block into the code to make use of it right there. Hold Shift while dragging to avoid closing the box when adding multiple blocks at once.\",\"editor-devtools/cut-block\":\"Cut Block\",\"editor-devtools/deep\":\"Deep\",\"editor-devtools/find\":\"Find\",\"editor-devtools/find-bar\":\"Find Bar\",\"editor-devtools/find-bar-costume-desc\":\"Click to list all costumes by name, and type to locate one. Use the arrow keys or mouse to click a name to jump straight to that costume.\",\"editor-devtools/find-placeholder\":\"Find (Ctrl+F)\",\"editor-devtools/help\":\"Help\",\"editor-devtools/help-make-space\":\"Make Space\",\"editor-devtools/help-make-space-desc\":\"Make extra space around a script by right clicking on the script and choosing \\\"Make Space\\\".\",\"editor-devtools/help-new\":\"★New★\",\"editor-devtools/help-title\":\"Scratch 3 Developer Tools\",\"editor-devtools/improved-tidy-up\":\"Improved Code Clean Up\",\"editor-devtools/improved-tidy-up-desc\":\"Right click on the code area to pop up the menu and the Clean up Blocks option will have been replaced by a Clean up Blocks + option. Use this to tidy your scripts and it will preserve your scripts columns as well as attempt to align the comments and remove all those orphaned variables, etc.\",\"editor-devtools/insert\":\"Insert\",\"editor-devtools/interactive-find-bar\":\"Interactive Find Bar (Ctrl + F)\",\"editor-devtools/interactive-find-bar-desc\":\"Quickly find and jump to any Custom Block, Variable, Event, or Hat block defined in a sprite by clicking on the new find bar located to the right of the Code, Costumes and Sounds tabs. Begin typing to filter down the list. Use the up and down arrow keys to switch between the possible entries, and the left and right arrows to cycle between all found instances of that block.\",\"editor-devtools/lists\":\"lists\",\"editor-devtools/make-space\":\"Make Space\",\"editor-devtools/middleclick\":\"Jump To\",\"editor-devtools/middleclick-desc\":\"Using the middle mouse button or Shift + Click on a variable or custom block allows you to jump to its definition or open it in the interactive find bar.\",\"editor-devtools/orphaned\":\"{count, plural, one {Developer tools: Delete 1 orphaned reporter block?} other {Developer tools: Delete # orphaned reporter blocks?} }\",\"editor-devtools/paste\":\"Paste\",\"editor-devtools/paste-from-clipboard\":\"Paste from Clipboard\",\"editor-devtools/paste-from-clipboard-desc\":\"Pastes from the clipboard, but importantly pastes it where your mouse cursor is so you can then place it (rather than placing it where you copied it from like the current scratch implementation).\",\"editor-devtools/replace\":\"Developer tools: Switch all {name} in this sprite for the variable named:\",\"editor-devtools/start-typing\":\"Start Typing...\",\"editor-devtools/swap\":\"Swap {var} in Sprite\",\"editor-devtools/swap-variable\":\"Swap Variable in Sprite\",\"editor-devtools/swap-variable-desc\":\"Right click a variable in your scripts for this new option. It allows you to switch all references to this variable in the current sprite all in one go to another variable. This is great for when you made a mistake and want to switch from one variable to another or need to change from a 'for all sprites' to a 'for this sprite only'. This option will not remove the old variable and will not affect any other sprites variables.\",\"editor-devtools/top\":\"send to top\",\"editor-devtools/tutorials\":\"Tutorials\",\"editor-devtools/unused-list\":\"{count, plural, one {Developer tools: Delete 1 unused local list? Here it is:\\n} other {Developer tools: Delete # unused local lists? Here they are:\\n} }\",\"editor-devtools/unused-var\":\"{count, plural, one {Developer tools: Delete 1 unused local variable? Here it is:\\n} other {Developer tools: Delete # unused local variables? Here they are:\\n} }\",\"editor-devtools/var-not-exist\":\"That variable does not exist...\",\"editor-devtools/variables\":\"variables\",\"editor-devtools/youtube\":\"YouTube tutorials\",\"editor-searchable-dropdowns/createBroadcast\":\"Create message \\\"{name}\\\"\",\"editor-searchable-dropdowns/createGlobalList\":\"Create list \\\"{name}\\\" for all sprites\",\"editor-searchable-dropdowns/createGlobalVariable\":\"Create variable \\\"{name}\\\" for all sprites\",\"editor-searchable-dropdowns/createLocalList\":\"Create list \\\"{name}\\\" for this sprite only\",\"editor-searchable-dropdowns/createLocalVariable\":\"Create variable \\\"{name}\\\" for this sprite only\",\"data-category-tweaks-v2/for-all-sprites\":\"For all sprites:\",\"data-category-tweaks-v2/for-this-sprite-only\":\"For this sprite only:\",\"data-category-tweaks-v2/list-category\":\"Lists\",\"hide-flyout/lock\":\"Lock Palette\",\"hide-flyout/unlock\":\"Unlock Palette\",\"mediarecorder/cancel\":\"Cancel\",\"mediarecorder/click-flag\":\"Waiting...\",\"mediarecorder/click-flag-description\":\"Click the green flag to start recording. Click this button to stop.\",\"mediarecorder/option-title\":\"Record Options\",\"mediarecorder/record\":\"Start Recording\",\"mediarecorder/record-after-flag\":\"Do not start recording until the Green Flag is clicked\",\"mediarecorder/record-audio\":\"Include project sounds\",\"mediarecorder/record-audio-description\":\"This does not include Text-to-Speech.\",\"mediarecorder/record-description\":\"Record the stage as a WebM file. You can save it to your computer after the recording is finished.\",\"mediarecorder/record-duration\":\"Record Duration (in seconds)\",\"mediarecorder/record-mic\":\"Include sounds from microphone\",\"mediarecorder/record-until-stop\":\"Stop recording after the project has stopped\",\"mediarecorder/record-until-stop-disabled\":\"You need to enable \\\"{afterFlagOption}\\\" to use this option.\",\"mediarecorder/start\":\"Start\",\"mediarecorder/start-delay\":\"Start Delay (in seconds)\",\"mediarecorder/starting-in\":\"Starting in {secs}...\",\"mediarecorder/stop\":\"Stop Recording\",\"debugger/block-breakpoint\":\"breakpoint\",\"debugger/block-error\":\"error %s\",\"debugger/block-log\":\"log %s\",\"debugger/block-warn\":\"warn %s\",\"debugger/cannot-pause-player\":\"Breakpoint block can only be used while on the editor.\",\"debugger/clear\":\"Clear\",\"debugger/clone-of\":\"Clone of {sprite}\",\"debugger/close\":\"Close\",\"debugger/console\":\"Logs\",\"debugger/debug\":\"Debug\",\"debugger/empty-string\":\"(empty string)\",\"debugger/enter-format\":\"Enter export format:\",\"debugger/export\":\"Export\",\"debugger/export-desc\":\"Click while holding Shift to customize export format.\",\"debugger/icon-error\":\"Error\",\"debugger/icon-warn\":\"Warning\",\"debugger/log-msg-broadcasted\":\"Broadcasted '{broadcast}'.\",\"debugger/log-msg-clone-cap\":\"Failed to create clone of '{sprite}', cannot create over 300 clones.\",\"debugger/log-msg-clone-created\":\"Created clone of '{sprite}'.\",\"debugger/log-msg-flag-clicked\":\"Green flag clicked.\",\"debugger/no-logs\":\"There are no logs to display.\",\"debugger/no-threads-running\":\"No threads running.\",\"debugger/step\":\"Step\",\"debugger/step-desc\":\"Executes one block.\",\"debugger/tab-logs\":\"Logs\",\"debugger/tab-threads\":\"Threads\",\"debugger/thread\":\"Thread {id}\",\"debugger/unknown-sprite\":\"(unknown sprite)\",\"debugger/unpause\":\"Resume\",\"pause/pause\":\"Pause\",\"clones/clones\":\"clones: {cloneCount}\",\"color-picker/hex\":\"hex color\",\"remove-sprite-confirm/confirm\":\"Do you want to delete the sprite?\",\"block-count/blocks\":\"{num, plural, one {1 block} other {# blocks}}\",\"onion-skinning/behind\":\"Behind\",\"onion-skinning/front\":\"Front\",\"onion-skinning/layering\":\"Layering\",\"onion-skinning/merge\":\"Merge\",\"onion-skinning/mode\":\"Mode\",\"onion-skinning/next\":\"Next costumes\",\"onion-skinning/opacity\":\"Opacity (%)\",\"onion-skinning/opacityStep\":\"Opacity step (%)\",\"onion-skinning/previous\":\"Previous costumes\",\"onion-skinning/settings\":\"Onion Skinning Settings\",\"onion-skinning/tint\":\"Tint\",\"onion-skinning/toggle\":\"Toggle Onion Skinning\",\"2d-color-picker/shade\":\"Shade\",\"better-img-uploads/upload\":\"HD Upload\",\"variable-manager/for-all-sprites\":\"Variables for all sprites\",\"variable-manager/for-this-sprite\":\"Variables for this sprite\",\"variable-manager/search\":\"Search\",\"variable-manager/variables\":\"Variables\",\"search-sprites/placeholder\":\"Search sprites...\",\"gamepad/axes-a-b\":\"Axes {a} & {b}\",\"gamepad/axis-arrows\":\"Arrow Keys\",\"gamepad/axis-cursor\":\"Cursor\",\"gamepad/axis-custom\":\"Custom\",\"gamepad/axis-none\":\"None\",\"gamepad/browser-support\":\"This browser and operating system have known bugs that may make this addon difficult to use. Try another browser if you encounter problems.\",\"gamepad/button-n\":\"Button {n}\",\"gamepad/clear\":\"Clear all controls\",\"gamepad/config-header\":\"This comment contains configuration for gamepad support in third-party tools or websites such as https://turbowarp.org/\\nDo not edit by hand\",\"gamepad/key-click\":\"Click\",\"gamepad/key-down\":\"Down\",\"gamepad/key-enter\":\"Enter\",\"gamepad/key-left\":\"Left\",\"gamepad/key-none\":\"(none)\",\"gamepad/key-right\":\"Right\",\"gamepad/key-space\":\"Space\",\"gamepad/key-up\":\"Up\",\"gamepad/keyinput-title\":\"Click and press a key or click to change button. Escape to cancel. Backspace or delete to clear.\",\"gamepad/no-controllers\":\"No controllers detected. Try plugging one in and pressing a button on it.\",\"gamepad/reset\":\"Reset all controls to project defaults\",\"gamepad/settings\":\"Gamepad Settings\",\"gamepad/store-in-project\":\"Store these settings in the project to override the default configuration (Experimental tool for project creators)\",\"folders/add-to-folder\":\"add to folder: {folder}\",\"folders/closed-folder\":\"Folder\",\"folders/confirm-backpack-folder\":\"Save entire folder to backpack?\",\"folders/create-folder\":\"create folder\",\"folders/name-not-allowed\":\"Invalid folder name\",\"folders/name-prompt\":\"Name of folder:\",\"folders/name-prompt-title\":\"Create Folder\",\"folders/open-folder\":\"Opened\",\"folders/remove-folder\":\"remove folder\",\"folders/remove-from-folder\":\"remove from folder\",\"folders/rename-folder\":\"rename folder\",\"folders/rename-folder-prompt\":\"Rename folder to:\",\"folders/rename-folder-prompt-title\":\"Rename Folder\",\"block-switching/control_forever\":\"forever\",\"block-switching/control_if\":\"if\",\"block-switching/control_if_else\":\"if... else\",\"block-switching/control_repeat_until\":\"repeat until\",\"block-switching/control_wait_until\":\"wait until\",\"block-switching/data_changevariableby\":\"change variable\",\"block-switching/data_hidelist\":\"hide list\",\"block-switching/data_hidevariable\":\"hide variable\",\"block-switching/data_insertatlist\":\"insert item\",\"block-switching/data_replaceitemoflist\":\"replace item\",\"block-switching/data_setvariableto\":\"set variable\",\"block-switching/data_showlist\":\"show list\",\"block-switching/data_showvariable\":\"show variable\",\"block-switching/debugger_error\":\"error\",\"block-switching/debugger_log\":\"log\",\"block-switching/debugger_warn\":\"warn\",\"block-switching/event_broadcast\":\"broadcast\",\"block-switching/event_broadcastandwait\":\"broadcast and wait\",\"block-switching/looks_backdropnumbername\":\"backdrop number or name\",\"block-switching/looks_changeeffectby\":\"change effect\",\"block-switching/looks_changesizeby\":\"change size\",\"block-switching/looks_costumenumbername\":\"costume number or name\",\"block-switching/looks_hide\":\"hide\",\"block-switching/looks_nextbackdrop\":\"next backdrop\",\"block-switching/looks_nextcostume\":\"next costume\",\"block-switching/looks_say\":\"say\",\"block-switching/looks_sayforsecs\":\"say for seconds\",\"block-switching/looks_seteffectto\":\"set effect\",\"block-switching/looks_setsizeto\":\"set size\",\"block-switching/looks_show\":\"show\",\"block-switching/looks_switchbackdropto\":\"switch backdrop\",\"block-switching/looks_switchbackdroptoandwait\":\"switch backdrop and wait\",\"block-switching/looks_think\":\"think\",\"block-switching/looks_thinkforsecs\":\"think for seconds\",\"block-switching/motion_changexby\":\"change x\",\"block-switching/motion_changeyby\":\"change y\",\"block-switching/motion_setx\":\"set x\",\"block-switching/motion_sety\":\"set y\",\"block-switching/motion_turnleft\":\"turn left\",\"block-switching/motion_turnright\":\"turn right\",\"block-switching/motion_xposition\":\"x position\",\"block-switching/motion_yposition\":\"y position\",\"block-switching/music_changeTempo\":\"change tempo\",\"block-switching/music_setTempo\":\"set tempo\",\"block-switching/operator_add\":\"+\",\"block-switching/operator_and\":\"and\",\"block-switching/operator_divide\":\"/\",\"block-switching/operator_equals\":\"=\",\"block-switching/operator_gt\":\">\",\"block-switching/operator_lt\":\"<\",\"block-switching/operator_mod\":\"mod\",\"block-switching/operator_multiply\":\"*\",\"block-switching/operator_or\":\"or\",\"block-switching/operator_subtract\":\"-\",\"block-switching/pen_changePenColorParamBy\":\"change parameter\",\"block-switching/pen_changePenHueBy\":\"change hue\",\"block-switching/pen_changePenShadeBy\":\"change shade\",\"block-switching/pen_changePenSizeBy\":\"change size\",\"block-switching/pen_penDown\":\"pen down\",\"block-switching/pen_penUp\":\"pen up\",\"block-switching/pen_setPenColorParamTo\":\"set parameter\",\"block-switching/pen_setPenHueToNumber\":\"set hue\",\"block-switching/pen_setPenShadeToNumber\":\"set shade\",\"block-switching/pen_setPenSizeTo\":\"set size\",\"block-switching/sensing_mousex\":\"mouse x\",\"block-switching/sensing_mousey\":\"mouse y\",\"block-switching/sound_changeeffectby\":\"change effect\",\"block-switching/sound_changevolumeby\":\"change volume\",\"block-switching/sound_play\":\"start\",\"block-switching/sound_playuntildone\":\"play until done\",\"block-switching/sound_seteffectto\":\"set effect\",\"block-switching/sound_setvolumeto\":\"set volume\",\"blocks2image/error_blocks_not_added\":\"Add blocks to workspace!\",\"blocks2image/export_all_to_PNG\":\"Export all as PNG\",\"blocks2image/export_all_to_SVG\":\"Export all as SVG\",\"blocks2image/export_selected_to_PNG\":\"Export block as PNG\",\"blocks2image/export_selected_to_SVG\":\"Export block as SVG\",\"editor-extra-keys/enter-key\":\"enter\",\"move-to-top-bottom/bottom\":\"move to bottom\",\"move-to-top-bottom/top\":\"move to top\",\"swap-local-global/cant-convert-cloud\":\"Cloud variables can't be converted to this sprite only.\",\"swap-local-global/cant-convert-conflict\":\"Can't convert because it would conflict with variables in another sprite: {sprites}\",\"swap-local-global/cant-convert-stage\":\"The stage can't have variables for this sprite only.\",\"swap-local-global/cant-convert-to-local\":\"Can't convert because it's used by multiple sprites: {sprites}\",\"swap-local-global/cant-convert-used-elsewhere\":\"Can't convert because it's used by another sprite: {sprite}\",\"swap-local-global/edit\":\"Edit properties:\",\"swap-local-global/edit-list-header\":\"Edit List\",\"swap-local-global/edit-list-option\":\"Rename or edit list\",\"swap-local-global/edit-variable-header\":\"Edit Variable\",\"swap-local-global/edit-variable-option\":\"Rename or edit variable\",\"swap-local-global/to-global\":\"Convert to \\\"For all sprites\\\"\",\"swap-local-global/to-local\":\"Convert to \\\"For this sprite only\\\"\",\"hide-stage/hide-stage\":\"Hide stage\"}");

/***/ }),

/***/ "./src/addons/addons/debugger/module.js":
/*!**********************************************!*\
  !*** ./src/addons/addons/debugger/module.js ***!
  \**********************************************/
/*! exports provided: isPaused, setPaused, onPauseChanged, onSingleStep, getRunningThread, singleStep, setup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isPaused", function() { return isPaused; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setPaused", function() { return setPaused; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "onPauseChanged", function() { return onPauseChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "onSingleStep", function() { return onSingleStep; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRunningThread", function() { return getRunningThread; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "singleStep", function() { return singleStep; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setup", function() { return setup; });
/* harmony import */ var _event_target_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../event-target.js */ "./src/addons/event-target.js");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }


/* inserted by pull.js */
// https://github.com/LLK/scratch-vm/blob/bb352913b57991713a5ccf0b611fda91056e14ec/src/engine/thread.js#L198

var STATUS_RUNNING = 0;
var STATUS_PROMISE_WAIT = 1;
var STATUS_YIELD = 2;
var STATUS_YIELD_TICK = 3;
var STATUS_DONE = 4;
var vm;
var paused = false;
var pausedThreadState = new WeakMap();
var pauseNewThreads = false;
var steppingThread = null;
var eventTarget = new _event_target_js__WEBPACK_IMPORTED_MODULE_0__["default"]();
var isPaused = function isPaused() {
  return paused;
};

var pauseThread = function pauseThread(thread) {
  if (thread.updateMonitor || pausedThreadState.has(thread)) {
    // Thread is already paused or shouldn't be paused.
    return;
  }

  var pauseState = {
    time: vm.runtime.currentMSecs,
    status: thread.status
  };
  pausedThreadState.set(thread, pauseState); // Pausing a thread now works by just setting its status to STATUS_PROMISE_WAIT.
  // At the start of each frame, we make sure each paused thread is still paused.
  // This is really the best way to implement this.
  // Converting thread.status into a getter/setter causes Scratch's sequencer to permanently
  //    perform significantly slower in some projects. I think this is because it causes some
  //    very hot functions to be deoptimized.
  // Trapping sequencer.stepThread to no-op for a paused thread causes Scratch's sequencer
  //    to waste 24ms of CPU time every frame because it thinks a thread is running.

  thread.status = STATUS_PROMISE_WAIT;
};

var ensurePausedThreadIsStillPaused = function ensurePausedThreadIsStillPaused(thread) {
  if (thread.status === STATUS_DONE) {
    // If a paused thread is finished by single stepping, let it keep being done.
    return;
  }

  var pauseState = pausedThreadState.get(thread);

  if (pauseState) {
    if (thread.status !== STATUS_PROMISE_WAIT) {
      // We'll record the change so we can properly resume the thread, but the thread must still be paused for now.
      pauseState.status = thread.status;
      thread.status = STATUS_PROMISE_WAIT;
    }
  }
};

var setSteppingThread = function setSteppingThread(thread) {
  steppingThread = thread;
};

var compensateForTimePassedWhilePaused = function compensateForTimePassedWhilePaused(thread, pauseState) {
  // TW: Compiled threads store their timer in a different place.
  if (thread.timer) {
    thread.timer.startTime += vm.runtime.currentMSecs - pauseState.time;
  }

  var stackFrame = thread.peekStackFrame();

  if (stackFrame && stackFrame.executionContext && stackFrame.executionContext.timer) {
    stackFrame.executionContext.timer.startTime += vm.runtime.currentMSecs - pauseState.time;
  }
};

var stepUnsteppedThreads = function stepUnsteppedThreads(lastSteppedThread) {
  // If we paused in the middle of a tick, we need to make sure to step the scripts that didn't get
  // stepped in that tick to avoid affecting project behavior.
  var threads = vm.runtime.threads;
  var startingIndex = getThreadIndex(lastSteppedThread);

  if (startingIndex !== -1) {
    for (var i = startingIndex; i < threads.length; i++) {
      var thread = threads[i];
      var status = thread.status;

      if (status === STATUS_RUNNING || status === STATUS_YIELD || status === STATUS_YIELD_TICK) {
        vm.runtime.sequencer.activeThread = thread;
        vm.runtime.sequencer.stepThread(thread);
      }
    }
  }
};

var setPaused = function setPaused(_paused) {
  if (paused !== _paused) {
    paused = _paused;
    eventTarget.dispatchEvent(new CustomEvent("change"));
  }

  if (_paused) {
    vm.runtime.audioEngine.audioContext.suspend();

    if (!vm.runtime.ioDevices.clock._paused) {
      vm.runtime.ioDevices.clock.pause();
    }

    vm.runtime.threads.forEach(pauseThread);
    var activeThread = vm.runtime.sequencer.activeThread;

    if (activeThread) {
      setSteppingThread(activeThread);
      eventTarget.dispatchEvent(new CustomEvent("step"));
    }
  } else {
    vm.runtime.audioEngine.audioContext.resume();
    vm.runtime.ioDevices.clock.resume();

    var _iterator = _createForOfIteratorHelper(vm.runtime.threads),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var thread = _step.value;
        var pauseState = pausedThreadState.get(thread);

        if (pauseState) {
          compensateForTimePassedWhilePaused(thread, pauseState);
          thread.status = pauseState.status;
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    pausedThreadState = new WeakMap();
    var lastSteppedThread = steppingThread; // This must happen after the "change" event is fired to fix https://github.com/ScratchAddons/ScratchAddons/issues/4281

    stepUnsteppedThreads(lastSteppedThread);
    steppingThread = null;
  }
};
var onPauseChanged = function onPauseChanged(listener) {
  eventTarget.addEventListener("change", function () {
    return listener(paused);
  });
};
var onSingleStep = function onSingleStep(listener) {
  eventTarget.addEventListener("step", listener);
};
var getRunningThread = function getRunningThread() {
  return steppingThread;
}; // A modified version of this function
// https://github.com/LLK/scratch-vm/blob/0e86a78a00db41af114df64255e2cd7dd881329f/src/engine/sequencer.js#L179
// Returns if we should continue executing this thread.

var singleStepThread = function singleStepThread(thread) {
  if (thread.status === STATUS_DONE) {
    return false;
  } // TW: Can't single-step compiled threads


  if (thread.isCompiled) {
    return false;
  }

  var currentBlockId = thread.peekStack();

  if (!currentBlockId) {
    thread.popStack();

    if (thread.stack.length === 0) {
      thread.status = STATUS_DONE;
      return false;
    }
  }

  pauseNewThreads = true;
  vm.runtime.sequencer.activeThread = thread;
  /*
    We need to call execute(this, thread) like the original sequencer. We don't
    have access to that method, so we need to force the original stepThread to run
    execute for us then exit before it tries to run more blocks.
    So, we make `thread.blockGlowInFrame = ...` throw an exception, so this line:
    https://github.com/LLK/scratch-vm/blob/bb352913b57991713a5ccf0b611fda91056e14ec/src/engine/sequencer.js#L214
    will end the function early. We then have to set it back to normal afterward.
     Why are we here just to suffer?
  */

  var specialError = ["special error used by Scratch Addons for implementing single-stepping"];
  Object.defineProperty(thread, "blockGlowInFrame", {
    set: function set(_block) {
      throw specialError;
    }
  });

  try {
    thread.status = STATUS_RUNNING; // Restart the warp timer on each step.
    // If we don't do this, Scratch will think a lot of time has passed and may yield this thread.

    if (thread.warpTimer) {
      thread.warpTimer.start();
    }

    try {
      vm.runtime.sequencer.stepThread(thread);
    } catch (err) {
      if (err !== specialError) throw err;
    }

    if (thread.status !== STATUS_RUNNING) {
      return false;
    }

    if (thread.peekStack() === currentBlockId) {
      thread.goToNextBlock();
    }

    while (!thread.peekStack()) {
      thread.popStack();

      if (thread.stack.length === 0) {
        thread.status = STATUS_DONE;
        return false;
      }

      var stackFrame = thread.peekStackFrame();

      if (stackFrame.isLoop) {
        if (thread.peekStackFrame().warpMode) {
          continue;
        } else {
          return false;
        }
      } else if (stackFrame.waitingReporter) {
        return false;
      }

      thread.goToNextBlock();
    }

    return true;
  } finally {
    pauseNewThreads = false;
    vm.runtime.sequencer.activeThread = null;
    Object.defineProperty(thread, "blockGlowInFrame", {
      value: currentBlockId,
      configurable: true,
      enumerable: true,
      writable: true
    }); // Strictly this doesn't seem to be necessary, but let's make sure the thread is still paused after we step it.

    if (thread.status !== STATUS_DONE) {
      thread.status = STATUS_PROMISE_WAIT;
    }
  }
};

var getRealStatus = function getRealStatus(thread) {
  var pauseState = pausedThreadState.get(thread);

  if (pauseState) {
    return pauseState.status;
  }

  return thread.status;
};

var getThreadIndex = function getThreadIndex(thread) {
  // We can't use vm.runtime.threads.indexOf(thread) because threads can be restarted.
  // This can happens when, for example, a "when I receive message1" script broadcasts message1.
  // The object in runtime.threads is replaced when this happens.
  if (!thread) return -1;
  return vm.runtime.threads.findIndex(function (otherThread) {
    return otherThread.target === thread.target && otherThread.topBlock === thread.topBlock && otherThread.stackClick === thread.stackClick && otherThread.updateMonitor === thread.updateMonitor;
  });
};

var findNewSteppingThread = function findNewSteppingThread(startingIndex) {
  var threads = vm.runtime.threads;

  for (var i = startingIndex; i < threads.length; i++) {
    var possibleNewThread = threads[i];

    if (possibleNewThread.updateMonitor) {
      // Never single-step monitor update threads.
      continue;
    } // TW: Can't single-step compiled threads


    if (possibleNewThread.isCompiled) {
      continue;
    }

    var status = getRealStatus(possibleNewThread);

    if (status === STATUS_RUNNING || status === STATUS_YIELD || status === STATUS_YIELD_TICK) {
      // Thread must not be running for single stepping to work.
      pauseThread(possibleNewThread);
      return possibleNewThread;
    }
  }

  return null;
};

var singleStep = function singleStep() {
  if (steppingThread) {
    var pauseState = pausedThreadState.get(steppingThread); // We can assume pauseState is defined as any single stepping threads must already be paused.
    // Make it look like no time has passed

    compensateForTimePassedWhilePaused(steppingThread, pauseState);
    pauseState.time = vm.runtime.currentMSecs; // Execute the block

    var continueExecuting = singleStepThread(steppingThread);

    if (!continueExecuting) {
      // Try to move onto the next thread
      steppingThread = findNewSteppingThread(getThreadIndex(steppingThread) + 1);
    }
  } // If we don't have a thread, than we are between VM steps and should search for a new thread


  if (!steppingThread) {
    setSteppingThread(findNewSteppingThread(0)); // End of VM step, emulate one frame of time passing.

    vm.runtime.ioDevices.clock._pausedTime += vm.runtime.currentStepTime; // Skip all sounds forward by vm.runtime.currentStepTime milliseconds so it's as
    //  if they where playing for one frame.

    var audioContext = vm.runtime.audioEngine.audioContext;

    var _iterator2 = _createForOfIteratorHelper(vm.runtime.targets),
        _step2;

    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var target = _step2.value;

        for (var _i = 0, _Object$keys = Object.keys(target.sprite.soundBank.soundPlayers); _i < _Object$keys.length; _i++) {
          var soundId = _Object$keys[_i];
          var soundPlayer = target.sprite.soundBank.soundPlayers[soundId];

          if (soundPlayer.outputNode) {
            soundPlayer.outputNode.stop(audioContext.currentTime);

            soundPlayer._createSource();

            soundPlayer.outputNode.start(audioContext.currentTime, audioContext.currentTime - soundPlayer.startingUntil + vm.runtime.currentStepTime / 1000);
            soundPlayer.startingUntil -= vm.runtime.currentStepTime / 1000;
          }
        }
      } // Move all threads forward one frame in time. For blocks like `wait () seconds`

    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }

    var _iterator3 = _createForOfIteratorHelper(vm.runtime.threads),
        _step3;

    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
        var thread = _step3.value;

        if (pausedThreadState.has(thread)) {
          pausedThreadState.get(thread).time += vm.runtime.currentStepTime;
        }
      } // Try to run edge activated hats

    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }

    pauseNewThreads = true;
    var hats = vm.runtime._hats;

    for (var hatType in hats) {
      if (!Object.prototype.hasOwnProperty.call(hats, hatType)) continue;
      var hat = hats[hatType];

      if (hat.edgeActivated) {
        vm.runtime.startHats(hatType);
      }
    }

    pauseNewThreads = false;
  }

  eventTarget.dispatchEvent(new CustomEvent("step"));
};
var setup = function setup(_vm) {
  if (vm) {
    return;
  }

  vm = _vm;
  var originalStepThreads = vm.runtime.sequencer.stepThreads;

  vm.runtime.sequencer.stepThreads = function () {
    if (isPaused()) {
      var _iterator4 = _createForOfIteratorHelper(this.runtime.threads),
          _step4;

      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var thread = _step4.value;
          ensurePausedThreadIsStillPaused(thread);
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
    }

    return originalStepThreads.call(this);
  }; // Unpause when green flag


  var originalGreenFlag = vm.runtime.greenFlag;

  vm.runtime.greenFlag = function () {
    setPaused(false);
    return originalGreenFlag.call(this);
  }; // Disable edge-activated hats and hats like "when key pressed" while paused.


  var originalStartHats = vm.runtime.startHats;

  vm.runtime.startHats = function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var hat = args[0]; // These hats can be manually started by the user when paused or while single stepping.

    var isUserInitiated = hat === "event_whenbroadcastreceived" || hat === "control_start_as_clone";

    if (pauseNewThreads) {
      if (!isUserInitiated && !this.getIsEdgeActivatedHat(hat)) {
        return [];
      }

      var newThreads = originalStartHats.apply(this, args);

      var _iterator5 = _createForOfIteratorHelper(newThreads),
          _step5;

      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var thread = _step5.value;
          pauseThread(thread);
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }

      return newThreads;
    } else if (paused && !isUserInitiated) {
      return [];
    }

    return originalStartHats.apply(this, args);
  }; // Paused threads should not be counted as running when updating GUI state.


  var originalGetMonitorThreadCount = vm.runtime._getMonitorThreadCount;

  vm.runtime._getMonitorThreadCount = function (threads) {
    var count = originalGetMonitorThreadCount.call(this, threads);

    if (paused) {
      var _iterator6 = _createForOfIteratorHelper(threads),
          _step6;

      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var thread = _step6.value;

          if (pausedThreadState.has(thread)) {
            count++;
          }
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
    }

    return count;
  };
};

/***/ }),

/***/ "./src/addons/addons/drag-drop/_runtime_entry.js":
/*!*******************************************************!*\
  !*** ./src/addons/addons/drag-drop/_runtime_entry.js ***!
  \*******************************************************/
/*! exports provided: resources */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resources", function() { return resources; });
/* harmony import */ var _userscript_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./userscript.js */ "./src/addons/addons/drag-drop/userscript.js");
/* harmony import */ var _css_loader_dragged_over_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! css-loader!./dragged-over.css */ "./node_modules/css-loader/index.js!./src/addons/addons/drag-drop/dragged-over.css");
/* harmony import */ var _css_loader_dragged_over_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_css_loader_dragged_over_css__WEBPACK_IMPORTED_MODULE_1__);
/* generated by pull.js */


var resources = {
  "userscript.js": _userscript_js__WEBPACK_IMPORTED_MODULE_0__["default"],
  "dragged-over.css": _css_loader_dragged_over_css__WEBPACK_IMPORTED_MODULE_1___default.a
};

/***/ }),

/***/ "./src/addons/addons/drag-drop/userscript.js":
/*!***************************************************!*\
  !*** ./src/addons/addons/drag-drop/userscript.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

/* harmony default export */ __webpack_exports__["default"] = (function (_x) {
  return _ref2.apply(this, arguments);
});

function _ref2() {
  _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(_ref) {
    var addon, global, console, DRAG_OVER_CLASS, nativeInputValueSetter, reactAwareSetValue, globalHandleDragOver;
    return regeneratorRuntime.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            addon = _ref.addon, global = _ref.global, console = _ref.console;
            DRAG_OVER_CLASS = "sa-dragged-over";
            nativeInputValueSetter = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, "value").set;

            reactAwareSetValue = function reactAwareSetValue(el, value) {
              nativeInputValueSetter.call(el, value);
              el.dispatchEvent(new Event("change", {
                bubbles: true
              }));
            };

            globalHandleDragOver = function globalHandleDragOver(e) {
              if (addon.self.disabled) return;

              if (!e.dataTransfer.types.includes("Files")) {
                return;
              }

              var el;
              var callback;

              if ((el = e.target.closest('div[class*="sprite-selector_sprite-selector"]')) || (el = e.target.closest('div[class*="stage-selector_stage-selector"]')) || (el = e.target.closest('div[class*="selector_wrapper"]'))) {
                callback = function callback(files) {
                  var hdFilter = addon.settings.get("use-hd-upload") ? "" : ":not(.sa-better-img-uploads-input)";
                  var fileInput = el.querySelector('input[class*="action-menu_file-input"]' + hdFilter);
                  fileInput.files = files;
                  fileInput.dispatchEvent(new Event("change", {
                    bubbles: true
                  }));
                };
              } else if (el = e.target.closest('div[class*="monitor_list-monitor"]')) {
                callback = function callback(files) {
                  var contextMenuBefore = document.querySelector("body > .react-contextmenu.react-contextmenu--visible"); // Simulate a right click on the list monitor

                  el.dispatchEvent(new MouseEvent("contextmenu", {
                    bubbles: true
                  })); // Get the right click menu that opened (monitor context menus are
                  // children of <body>)

                  var contextMenuAfter = document.querySelector("body > .react-contextmenu.react-contextmenu--visible"); // `contextMenuAfter` is only null if the context menu was already open
                  // for the list monitor, in which case we can use the context menu from
                  // before the simulated right click

                  var contextMenu = contextMenuAfter === null ? contextMenuBefore : contextMenuAfter; // Sometimes the menu flashes open, so force hide it.

                  contextMenu.style.display = "none"; // Override DOM methods to import the text file directly
                  // See: https://github.com/LLK/scratch-gui/blob/develop/src/lib/import-csv.js#L21-L22

                  var appendChild = document.body.appendChild;

                  document.body.appendChild = function (fileInput) {
                    // Restore appendChild to <body>
                    document.body.appendChild = appendChild;

                    if (fileInput instanceof HTMLInputElement) {
                      document.body.appendChild(fileInput); // Prevent Scratch from opening the file input dialog

                      fileInput.click = function () {}; // Insert files from the drop event into the file input


                      fileInput.files = files;
                      fileInput.dispatchEvent(new Event("change"));
                      window.requestAnimationFrame(function () {
                        window.requestAnimationFrame(function () {
                          contextMenu.style.display = null;
                          contextMenu.style.opacity = 0;
                          contextMenu.style.pointerEvents = "none";
                        });
                      });
                    } else {
                      // The next call for `appendChild` SHOULD be the file input, but if
                      // it's not, then make `appendChild` behave as normal.
                      console.error('File input was not immediately given to appendChild upon clicking "Import"!');
                      return appendChild(fileInput);
                    }
                  }; // Simulate clicking on the "Import" option


                  contextMenu.children[0].click();
                };
              } else if (el = e.target.closest('div[class*="question_question-input"] > input[class*="input_input-form_l9eYg"]')) {
                callback = /*#__PURE__*/function () {
                  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(files) {
                    var text, selectionStart;
                    return regeneratorRuntime.wrap(function _callee$(_context) {
                      while (1) {
                        switch (_context.prev = _context.next) {
                          case 0:
                            _context.next = 2;
                            return Promise.all(Array.from(files, function (file) {
                              return file.text();
                            }));

                          case 2:
                            text = _context.sent.join("").replace(/[\r\n]+$/, "").replace(/\r?\n|\r/g, " ");
                            selectionStart = el.selectionStart;
                            reactAwareSetValue(el, el.value.slice(0, selectionStart) + text + el.value.slice(el.selectionEnd));
                            el.setSelectionRange(selectionStart, selectionStart + text.length);

                          case 6:
                          case "end":
                            return _context.stop();
                        }
                      }
                    }, _callee);
                  }));

                  return function callback(_x2) {
                    return _ref3.apply(this, arguments);
                  };
                }();
              }

              if (!el) {
                return;
              }

              e.preventDefault();

              if (el.classList.contains(DRAG_OVER_CLASS)) {
                return;
              }

              el.classList.add(DRAG_OVER_CLASS);

              var handleDrop = function handleDrop(e) {
                e.preventDefault();
                cleanup();

                if (e.dataTransfer.types.includes("Files") && e.dataTransfer.files.length > 0) {
                  callback(e.dataTransfer.files);
                }
              };

              var handleDragOver = function handleDragOver(e) {
                e.preventDefault();
                e.dataTransfer.dropEffect = "copy";
              };

              e.dataTransfer.dropEffect = "copy";

              var handleDragLeave = function handleDragLeave(e) {
                e.preventDefault();
                cleanup();
              };

              var cleanup = function cleanup() {
                el.classList.remove(DRAG_OVER_CLASS);
                el.removeEventListener("dragover", handleDragOver);
                el.removeEventListener("dragleave", handleDragLeave);
                el.removeEventListener("drop", handleDrop);
              };

              el.addEventListener("dragover", handleDragOver);
              el.addEventListener("dragleave", handleDragLeave);
              el.addEventListener("drop", handleDrop);
            };

            document.addEventListener("dragover", globalHandleDragOver, {
              useCapture: true
            });

          case 6:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2);
  }));
  return _ref2.apply(this, arguments);
}

/***/ }),

/***/ "./src/addons/addons/mute-project/_runtime_entry.js":
/*!**********************************************************!*\
  !*** ./src/addons/addons/mute-project/_runtime_entry.js ***!
  \**********************************************************/
/*! exports provided: resources */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resources", function() { return resources; });
/* harmony import */ var _userscript_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./userscript.js */ "./src/addons/addons/mute-project/userscript.js");
/* generated by pull.js */

var resources = {
  "userscript.js": _userscript_js__WEBPACK_IMPORTED_MODULE_0__["default"]
};

/***/ }),

/***/ "./src/addons/addons/mute-project/userscript.js":
/*!******************************************************!*\
  !*** ./src/addons/addons/mute-project/userscript.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _url_loader_icon_mute_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! url-loader!./icon--mute.svg */ "./node_modules/url-loader/dist/cjs.js!./src/addons/addons/mute-project/icon--mute.svg");
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

/* inserted by pull.js */


var _twGetAsset = function _twGetAsset(path) {
  if (path === "/icon--mute.svg") return _url_loader_icon_mute_svg__WEBPACK_IMPORTED_MODULE_0__["default"];
  throw new Error("Unknown asset: ".concat(path));
};

/* harmony default export */ __webpack_exports__["default"] = (function (_x) {
  return _ref2.apply(this, arguments);
});

function _ref2() {
  _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(_ref) {
    var addon, global, console, vm, muted, icon, toggleMute, button;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            addon = _ref.addon, global = _ref.global, console = _ref.console;
            vm = addon.tab.traps.vm;
            muted = false;
            icon = document.createElement("img");
            icon.loading = "lazy";
            icon.src = _twGetAsset("/icon--mute.svg");
            icon.style.display = "none";

            toggleMute = function toggleMute(e) {
              if (!addon.self.disabled && (e.ctrlKey || e.metaKey)) {
                e.cancelBubble = true;
                e.preventDefault();
                muted = !muted;

                if (muted) {
                  vm.runtime.audioEngine.inputNode.gain.value = 0;
                  icon.style.display = "block";
                } else {
                  vm.runtime.audioEngine.inputNode.gain.value = 1;
                  icon.style.display = "none";
                }
              }
            };

            addon.self.addEventListener("disabled", function () {
              muted = false;
              vm.runtime.audioEngine.inputNode.gain.value = 1;
              icon.style.display = "none";
            });

          case 9:
            if (false) {}

            _context.next = 12;
            return addon.tab.waitForElement("[class^='green-flag_green-flag']", {
              markAsSeen: true,
              reduxEvents: ["scratch-gui/mode/SET_PLAYER", "fontsLoaded/SET_FONTS_LOADED", "scratch-gui/locales/SELECT_LOCALE"]
            });

          case 12:
            button = _context.sent;
            addon.tab.appendToSharedSpace({
              space: "afterStopButton",
              element: icon,
              order: 0
            });
            button.addEventListener("click", toggleMute);
            button.addEventListener("contextmenu", toggleMute);
            _context.next = 9;
            break;

          case 18:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _ref2.apply(this, arguments);
}

/***/ }),

/***/ "./src/addons/addons/pause/_runtime_entry.js":
/*!***************************************************!*\
  !*** ./src/addons/addons/pause/_runtime_entry.js ***!
  \***************************************************/
/*! exports provided: resources */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resources", function() { return resources; });
/* harmony import */ var _userscript_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./userscript.js */ "./src/addons/addons/pause/userscript.js");
/* harmony import */ var _css_loader_style_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! css-loader!./style.css */ "./node_modules/css-loader/index.js!./src/addons/addons/pause/style.css");
/* harmony import */ var _css_loader_style_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_css_loader_style_css__WEBPACK_IMPORTED_MODULE_1__);
/* generated by pull.js */


var resources = {
  "userscript.js": _userscript_js__WEBPACK_IMPORTED_MODULE_0__["default"],
  "style.css": _css_loader_style_css__WEBPACK_IMPORTED_MODULE_1___default.a
};

/***/ }),

/***/ "./src/addons/addons/pause/userscript.js":
/*!***********************************************!*\
  !*** ./src/addons/addons/pause/userscript.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _url_loader_pause_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! url-loader!./pause.svg */ "./node_modules/url-loader/dist/cjs.js!./src/addons/addons/pause/pause.svg");
/* harmony import */ var _url_loader_play_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! url-loader!./play.svg */ "./node_modules/url-loader/dist/cjs.js!./src/addons/addons/pause/play.svg");
/* harmony import */ var _debugger_module_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../debugger/module.js */ "./src/addons/addons/debugger/module.js");
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

/* inserted by pull.js */



var _twGetAsset = function _twGetAsset(path) {
  if (path === "/pause.svg") return _url_loader_pause_svg__WEBPACK_IMPORTED_MODULE_0__["default"];
  if (path === "/play.svg") return _url_loader_play_svg__WEBPACK_IMPORTED_MODULE_1__["default"];
  throw new Error("Unknown asset: ".concat(path));
};


/* harmony default export */ __webpack_exports__["default"] = (function (_x) {
  return _ref2.apply(this, arguments);
});

function _ref2() {
  _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(_ref) {
    var addon, global, console, msg, img, setSrc;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            addon = _ref.addon, global = _ref.global, console = _ref.console, msg = _ref.msg;
            Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_2__["setup"])(addon.tab.traps.vm);
            img = document.createElement("img");
            img.className = "pause-btn";
            img.draggable = false;
            img.title = msg("pause");

            setSrc = function setSrc() {
              return img.src = _twGetAsset(Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_2__["isPaused"])() ? "/play.svg" : "/pause.svg");
            };

            img.addEventListener("click", function () {
              return Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_2__["setPaused"])(!Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_2__["isPaused"])());
            });
            addon.tab.displayNoneWhileDisabled(img);
            addon.self.addEventListener("disabled", function () {
              return Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_2__["setPaused"])(false);
            });
            setSrc();
            Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_2__["onPauseChanged"])(setSrc);

          case 12:
            if (false) {}

            _context.next = 15;
            return addon.tab.waitForElement("[class^='green-flag']", {
              markAsSeen: true,
              reduxEvents: ["scratch-gui/mode/SET_PLAYER", "fontsLoaded/SET_FONTS_LOADED", "scratch-gui/locales/SELECT_LOCALE"]
            });

          case 15:
            addon.tab.appendToSharedSpace({
              space: "afterGreenFlag",
              element: img,
              order: 0
            });
            _context.next = 12;
            break;

          case 18:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _ref2.apply(this, arguments);
}

/***/ }),

/***/ "./src/addons/api.js":
/*!***************************!*\
  !*** ./src/addons/api.js ***!
  \***************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(global) {/* harmony import */ var intl_messageformat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! intl-messageformat */ "./node_modules/intl-messageformat/index.js");
/* harmony import */ var intl_messageformat__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(intl_messageformat__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _settings_store_singleton__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./settings-store-singleton */ "./src/addons/settings-store-singleton.js");
/* harmony import */ var _lib_data_uri_to_blob__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/data-uri-to-blob */ "./src/lib/data-uri-to-blob.js");
/* harmony import */ var _event_target__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./event-target */ "./src/addons/event-target.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./hooks */ "./src/addons/hooks.js");
/* harmony import */ var _generated_addon_manifests__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./generated/addon-manifests */ "./src/addons/generated/addon-manifests.js");
/* harmony import */ var _addons_l10n_en_json__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./addons-l10n/en.json */ "./src/addons/addons-l10n/en.json");
var _addons_l10n_en_json__WEBPACK_IMPORTED_MODULE_6___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./addons-l10n/en.json */ "./src/addons/addons-l10n/en.json", 1);
/* harmony import */ var _generated_l10n_entries__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./generated/l10n-entries */ "./src/addons/generated/l10n-entries.js");
/* harmony import */ var _generated_addon_entries__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./generated/addon-entries */ "./src/addons/generated/addon-entries.js");
/* harmony import */ var _contextmenu__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./contextmenu */ "./src/addons/contextmenu.js");
/* harmony import */ var _modal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./modal */ "./src/addons/modal.js");
/* harmony import */ var _polyfill__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./polyfill */ "./src/addons/polyfill.js");
/* harmony import */ var _polyfill__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_polyfill__WEBPACK_IMPORTED_MODULE_11__);
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

/**
 * Copyright (C) 2021 Thomas Weber
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */












/* eslint-disable no-console */

var escapeHTML = function escapeHTML(str) {
  return str.replace(/([<>'"&])/g, function (_, l) {
    return "&#".concat(l.charCodeAt(0), ";");
  });
};

var kebabCaseToCamelCase = function kebabCaseToCamelCase(str) {
  return str.replace(/-([a-z])/g, function (g) {
    return g[1].toUpperCase();
  });
};

var createStylesheet = function createStylesheet(css) {
  var style = document.createElement('style');
  style.textContent = css;
  return style;
};

var _scratchClassNames = null;

var getScratchClassNames = function getScratchClassNames() {
  if (_scratchClassNames) {
    return _scratchClassNames;
  }

  var cssRules = Array.from(document.styleSheets) // Ignore some scratch-paint stylesheets
  .filter(function (styleSheet) {
    return !(styleSheet.ownerNode.textContent.startsWith('/* DO NOT EDIT\n@todo This file is copied from GUI and should be pulled out into a shared library.') && (styleSheet.ownerNode.textContent.includes('input_input-form') || styleSheet.ownerNode.textContent.includes('label_input-group_')));
  }).map(function (e) {
    try {
      return _toConsumableArray(e.cssRules);
    } catch (_e) {
      return [];
    }
  }).flat();
  var classes = cssRules.map(function (e) {
    return e.selectorText;
  }).filter(function (e) {
    return e;
  }).map(function (e) {
    return e.match(/(([\w-]+?)_([\w-]+)_([\w\d-]+))/g);
  }).filter(function (e) {
    return e;
  }).flat();
  _scratchClassNames = _toConsumableArray(new Set(classes));
  var observer = new MutationObserver(function (mutationList) {
    var _iterator = _createForOfIteratorHelper(mutationList),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var mutation = _step.value;

        var _iterator2 = _createForOfIteratorHelper(mutation.addedNodes),
            _step2;

        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var node = _step2.value;

            if (node.tagName === 'STYLE') {
              _scratchClassNames = null;
              observer.disconnect();
              return;
            }
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  });
  observer.observe(document.head, {
    childList: true
  });
  return _scratchClassNames;
};

var _mutationObserver;

var _mutationObserverCallbacks = [];

var addMutationObserverCallback = function addMutationObserverCallback(newCallback) {
  if (!_mutationObserver) {
    _mutationObserver = new MutationObserver(function () {
      var _iterator3 = _createForOfIteratorHelper(_mutationObserverCallbacks),
          _step3;

      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var cb = _step3.value;
          cb();
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
    });

    _mutationObserver.observe(document.documentElement, {
      attributes: false,
      childList: true,
      subtree: true
    });
  }

  _mutationObserverCallbacks.push(newCallback);
};

var removeMutationObserverCallback = function removeMutationObserverCallback(callback) {
  _mutationObserverCallbacks = _mutationObserverCallbacks.filter(function (i) {
    return i !== callback;
  });
};

var Redux = /*#__PURE__*/function (_EventTargetShim) {
  _inherits(Redux, _EventTargetShim);

  var _super = _createSuper(Redux);

  function Redux() {
    var _this;

    _classCallCheck(this, Redux);

    _this = _super.call(this);
    _this._isInReducer = false;
    _this._initialized = false;
    _this._nextState = null;
    return _this;
  }

  _createClass(Redux, [{
    key: "initialize",
    value: function initialize() {
      var _this2 = this;

      if (!this._initialized) {
        _hooks__WEBPACK_IMPORTED_MODULE_4__["default"].appStateReducer = function (action, prev, next) {
          _this2._isInReducer = true;
          _this2._nextState = next;

          _this2.dispatchEvent(new CustomEvent('statechanged', {
            detail: {
              action: action,
              prev: prev,
              next: next
            }
          }));

          _this2._nextState = null;
          _this2._isInReducer = false;
        };

        this._initialized = true;
      }
    }
  }, {
    key: "dispatch",
    value: function dispatch(m) {
      if (this._isInReducer) {
        queueMicrotask(function () {
          return _hooks__WEBPACK_IMPORTED_MODULE_4__["default"].appStateStore.dispatch(m);
        });
      } else {
        _hooks__WEBPACK_IMPORTED_MODULE_4__["default"].appStateStore.dispatch(m);
      }
    }
  }, {
    key: "state",
    get: function get() {
      if (this._nextState) return this._nextState;
      return _hooks__WEBPACK_IMPORTED_MODULE_4__["default"].appStateStore.getState();
    }
  }]);

  return Redux;
}(_event_target__WEBPACK_IMPORTED_MODULE_3__["default"]);

var getEditorMode = function getEditorMode() {
  // eslint-disable-next-line no-use-before-define
  var mode = tabReduxInstance.state.scratchGui.mode;
  if (mode.isEmbedded) return 'embed';
  if (mode.isFullScreen) return 'fullscreen';
  if (mode.isPlayerOnly) return 'projectpage';
  return 'editor';
};

var tabReduxInstance = new Redux();
var language = tabReduxInstance.state.locales.locale.split('-')[0];

var getTranslations = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
    var localeMessages;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            if (!_generated_l10n_entries__WEBPACK_IMPORTED_MODULE_7__["default"][language]) {
              _context.next = 5;
              break;
            }

            _context.next = 3;
            return _generated_l10n_entries__WEBPACK_IMPORTED_MODULE_7__["default"][language]();

          case 3:
            localeMessages = _context.sent;
            Object.assign(_addons_l10n_en_json__WEBPACK_IMPORTED_MODULE_6__, localeMessages);

          case 5:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));

  return function getTranslations() {
    return _ref.apply(this, arguments);
  };
}();

var addonMessagesPromise = getTranslations();

var untilInEditor = function untilInEditor() {
  if (!tabReduxInstance.state.scratchGui.mode.isPlayerOnly) {
    return;
  }

  return new Promise(function (resolve) {
    var handler = function handler() {
      if (!tabReduxInstance.state.scratchGui.mode.isPlayerOnly) {
        resolve();
        tabReduxInstance.removeEventListener('statechanged', handler);
      }
    };

    tabReduxInstance.initialize();
    tabReduxInstance.addEventListener('statechanged', handler);
  });
};

var getDisplayNoneWhileDisabledClass = function getDisplayNoneWhileDisabledClass(id) {
  return "addons-display-none-".concat(id);
};

var parseArguments = function parseArguments(code) {
  return code.split(/(?=[^\\]%[nbs])/g).map(function (i) {
    return i.trim();
  }).filter(function (i) {
    return i.charAt(0) === '%';
  }).map(function (i) {
    return i.substring(0, 2);
  });
};

var fixDisplayName = function fixDisplayName(displayName) {
  return displayName.replace(/([^\s])(%[nbs])/g, function (_, before, arg) {
    return "".concat(before, " ").concat(arg);
  });
};

var compareArrays = function compareArrays(a, b) {
  return JSON.stringify(a) === JSON.stringify(b);
};

var _firstAddBlockRan = false;
var contextMenuCallbacks = [];
var CONTEXT_MENU_ORDER = ['editor-devtools', 'block-switching', 'blocks2image', 'swap-local-global'];
var createdAnyBlockContextMenus = false;

var getInternalKey = function getInternalKey(element) {
  return Object.keys(element).find(function (key) {
    return key.startsWith('__reactInternalInstance$');
  });
}; // Stylesheets are added at the start of <body> so that they have higher precedence
// than those in <head>


var stylesheetContainer = document.createElement('div');
document.body.insertBefore(stylesheetContainer, document.body.firstChild);

var getStylesheetPrecedence = function getStylesheetPrecedence(styleElement) {
  var addonId = styleElement.dataset.addonId; // columns must have higher precedence than hide-flyout

  if (addonId === 'columns') return 1; // editor-stage-left must have higher precedence than hide-stage

  if (addonId === 'editor-stage-left') return 1;
  return 0;
};

var addStylesheet = function addStylesheet(styleElement) {
  var priority = getStylesheetPrecedence(styleElement);

  var _iterator4 = _createForOfIteratorHelper(stylesheetContainer.children),
      _step4;

  try {
    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
      var child = _step4.value;

      if (getStylesheetPrecedence(child) >= priority) {
        stylesheetContainer.insertBefore(styleElement, child);
        return;
      }
    }
  } catch (err) {
    _iterator4.e(err);
  } finally {
    _iterator4.f();
  }

  stylesheetContainer.appendChild(styleElement);
};

var Tab = /*#__PURE__*/function (_EventTargetShim2) {
  _inherits(Tab, _EventTargetShim2);

  var _super2 = _createSuper(Tab);

  function Tab(id) {
    var _this3;

    _classCallCheck(this, Tab);

    _this3 = _super2.call(this);
    _this3._id = id;
    _this3._seenElements = new WeakSet(); // traps is public API

    _this3.traps = {
      get vm() {
        return tabReduxInstance.state.scratchGui.vm;
      },

      getBlockly: function getBlockly() {
        if (_hooks__WEBPACK_IMPORTED_MODULE_4__["default"].blockly) {
          return Promise.resolve(_hooks__WEBPACK_IMPORTED_MODULE_4__["default"].blockly);
        }

        return new Promise(function (resolve) {
          _hooks__WEBPACK_IMPORTED_MODULE_4__["default"].blocklyCallbacks.push(function () {
            return resolve(_hooks__WEBPACK_IMPORTED_MODULE_4__["default"].blockly);
          });
        });
      },
      getPaper: function () {
        var _getPaper = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
          var modeSelector, reactInternalKey, internalState, toolState, tool, toolInstance, paperScope;
          return regeneratorRuntime.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _context2.next = 2;
                  return _this3.waitForElement("[class*='paint-editor_mode-selector']", {
                    reduxCondition: function reduxCondition(state) {
                      return state.scratchGui.editorTab.activeTabIndex === 1 && !state.scratchGui.mode.isPlayerOnly;
                    }
                  });

                case 2:
                  modeSelector = _context2.sent;
                  reactInternalKey = Object.keys(modeSelector).find(function (key) {
                    return key.startsWith('__reactInternalInstance$');
                  });
                  internalState = modeSelector[reactInternalKey].child; // .tool or .blob.tool only exists on the selected tool

                  toolState = internalState;

                case 6:
                  if (!toolState) {
                    _context2.next = 17;
                    break;
                  }

                  toolInstance = toolState.child.stateNode;

                  if (!toolInstance.tool) {
                    _context2.next = 11;
                    break;
                  }

                  tool = toolInstance.tool;
                  return _context2.abrupt("break", 17);

                case 11:
                  if (!(toolInstance.blob && toolInstance.blob.tool)) {
                    _context2.next = 14;
                    break;
                  }

                  tool = toolInstance.blob.tool;
                  return _context2.abrupt("break", 17);

                case 14:
                  toolState = toolState.sibling;
                  _context2.next = 6;
                  break;

                case 17:
                  if (!tool) {
                    _context2.next = 20;
                    break;
                  }

                  paperScope = tool._scope;
                  return _context2.abrupt("return", paperScope);

                case 20:
                  throw new Error('cannot find paper :(');

                case 21:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2);
        }));

        function getPaper() {
          return _getPaper.apply(this, arguments);
        }

        return getPaper;
      }(),
      getInternalKey: getInternalKey
    };
    return _this3;
  }

  _createClass(Tab, [{
    key: "redux",
    get: function get() {
      return tabReduxInstance;
    }
  }, {
    key: "waitForElement",
    value: function waitForElement(selector) {
      var _this4 = this;

      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref2$markAsSeen = _ref2.markAsSeen,
          markAsSeen = _ref2$markAsSeen === void 0 ? false : _ref2$markAsSeen,
          condition = _ref2.condition,
          reduxCondition = _ref2.reduxCondition,
          reduxEvents = _ref2.reduxEvents;

      var externalEventSatisfied = true;

      var evaluateCondition = function evaluateCondition() {
        if (!externalEventSatisfied) return false;
        if (condition && !condition()) return false;
        if (reduxCondition && !reduxCondition(tabReduxInstance.state)) return false;
        return true;
      };

      if (evaluateCondition()) {
        var firstQuery = document.querySelectorAll(selector);

        var _iterator5 = _createForOfIteratorHelper(firstQuery),
            _step5;

        try {
          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
            var element = _step5.value;
            if (this._seenElements.has(element)) continue;
            if (markAsSeen) this._seenElements.add(element);
            return Promise.resolve(element);
          }
        } catch (err) {
          _iterator5.e(err);
        } finally {
          _iterator5.f();
        }
      }

      var reduxListener;

      if (reduxEvents) {
        externalEventSatisfied = false;

        reduxListener = function reduxListener(_ref3) {
          var detail = _ref3.detail;
          var type = detail.action.type; // As addons can't run before DOM exists here, ignore fontsLoaded/SET_FONTS_LOADED
          // Otherwise, as our font loading is very async, we could activate more often than required.

          if (reduxEvents.includes(type) && type !== 'fontsLoaded/SET_FONTS_LOADED') {
            externalEventSatisfied = true;
          }
        };

        this.redux.initialize();
        this.redux.addEventListener('statechanged', reduxListener);
      }

      return new Promise(function (resolve) {
        var callback = function callback() {
          if (!evaluateCondition()) {
            return;
          }

          var elements = document.querySelectorAll(selector);

          var _iterator6 = _createForOfIteratorHelper(elements),
              _step6;

          try {
            for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
              var _element = _step6.value;
              if (_this4._seenElements.has(_element)) continue;
              resolve(_element);
              removeMutationObserverCallback(callback);
              if (markAsSeen) _this4._seenElements.add(_element);

              if (reduxListener) {
                _this4.redux.removeEventListener('statechanged', reduxListener);
              }

              break;
            }
          } catch (err) {
            _iterator6.e(err);
          } finally {
            _iterator6.f();
          }
        };

        addMutationObserverCallback(callback);
      });
    }
  }, {
    key: "appendToSharedSpace",
    value: function appendToSharedSpace(_ref4) {
      var _this5 = this;

      var space = _ref4.space,
          element = _ref4.element,
          order = _ref4.order,
          scope = _ref4.scope;
      var SHARED_SPACES = {
        stageHeader: {
          element: function element() {
            return document.querySelector("[class^='stage-header_stage-size-row']");
          },
          from: function from() {
            return [];
          },
          until: function until() {
            return [document.querySelector("[class^='stage-header_stage-size-toggle-group']"), document.querySelector("[class^='stage-header_stage-size-row']").lastChild];
          }
        },
        fullscreenStageHeader: {
          element: function element() {
            return document.querySelector("[class^='stage-header_stage-menu-wrapper']");
          },
          from: function from() {
            var emptyDiv = this.element().querySelector('.addon-spacer');

            if (!emptyDiv) {
              emptyDiv = document.createElement('div');
              emptyDiv.style.marginLeft = 'auto';
              emptyDiv.className = 'addon-spacer';
              this.element().insertBefore(emptyDiv, this.element().lastChild);
            }

            return [emptyDiv];
          },
          until: function until() {
            return [document.querySelector("[class^='stage-header_stage-menu-wrapper']").lastChild];
          }
        },
        afterGreenFlag: {
          element: function element() {
            return document.querySelector("[class^='controls_controls-container']");
          },
          from: function from() {
            return [];
          },
          until: function until() {
            return [document.querySelector("[class^='stop-all_stop-all']")];
          }
        },
        afterStopButton: {
          element: function element() {
            return document.querySelector("[class^='controls_controls-container']");
          },
          from: function from() {
            return [document.querySelector("[class^='stop-all_stop-all']")];
          },
          until: function until() {
            return [];
          }
        },
        afterSoundTab: {
          element: function element() {
            return document.querySelector("[class^='react-tabs_react-tabs__tab-list']");
          },
          from: function from() {
            return [document.querySelector("[class^='react-tabs_react-tabs__tab-list']").children[2]];
          },
          until: function until() {
            return [document.querySelector('#s3devToolBar')];
          }
        },
        assetContextMenuAfterExport: {
          element: function element() {
            return scope;
          },
          from: function from() {
            return Array.prototype.filter.call(scope.children, function (c) {
              return c.textContent === _this5.scratchMessage('gui.spriteSelectorItem.contextMenuExport');
            });
          },
          until: function until() {
            return Array.prototype.filter.call(scope.children, function (c) {
              return c.textContent === _this5.scratchMessage('gui.spriteSelectorItem.contextMenuDelete');
            });
          }
        },
        assetContextMenuAfterDelete: {
          element: function element() {
            return scope;
          },
          from: function from() {
            return Array.prototype.filter.call(scope.children, function (c) {
              return c.textContent === _this5.scratchMessage('gui.spriteSelectorItem.contextMenuDelete');
            });
          },
          until: function until() {
            return [];
          }
        }
      };
      var spaceInfo = SHARED_SPACES[space];
      var spaceElement = spaceInfo.element();
      if (!spaceElement) return false;
      var from = spaceInfo.from();
      var until = spaceInfo.until();
      element.dataset.saSharedSpaceOrder = order;
      var foundFrom = false;
      if (from.length === 0) foundFrom = true; // insertAfter = element whose nextSibling will be the new element
      // -1 means append at beginning of space (prepend)
      // This will stay null if we need to append at the end of space

      var insertAfter = null;
      var children = Array.from(spaceElement.children);

      var _iterator7 = _createForOfIteratorHelper(children.keys()),
          _step7;

      try {
        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
          var indexString = _step7.value;
          var child = children[indexString];
          var i = Number(indexString); // Find either element from "from" before doing anything

          if (!foundFrom) {
            if (from.includes(child)) {
              foundFrom = true; // If this is the last child, insertAfter will stay null
              // and the element will be appended at the end of space
            }

            continue;
          }

          if (until.includes(child)) {
            // This is the first SA element appended to this space
            // If from = [] then prepend, otherwise append after
            // previous child (likely a "from" element)
            if (i === 0) insertAfter = -1;else insertAfter = children[i - 1];
            break;
          }

          if (child.dataset.addonSharedSpaceOrder) {
            if (Number(child.dataset.addonSharedSpaceOrder) > order) {
              // We found another SA element with higher order number
              // If from = [] and this is the first child, prepend.
              // Otherwise, append before this child.
              if (i === 0) insertAfter = -1;else insertAfter = children[i - 1];
              break;
            }
          }
        }
      } catch (err) {
        _iterator7.e(err);
      } finally {
        _iterator7.f();
      }

      if (!foundFrom) return false; // It doesn't matter if we didn't find an "until"

      if (insertAfter === null) {
        // This might happen with until = []
        spaceElement.appendChild(element);
      } else if (insertAfter === -1) {
        // This might happen with from = []
        spaceElement.prepend(element);
      } else {
        // Works like insertAfter but using insertBefore API.
        // nextSibling cannot be null because insertAfter
        // is always set to children[i-1], so it must exist
        spaceElement.insertBefore(element, insertAfter.nextSibling);
      }

      return true;
    }
  }, {
    key: "addBlock",
    value: function addBlock(procedureCode, _ref5) {
      var args = _ref5.args,
          displayName = _ref5.displayName,
          callback = _ref5.callback;
      var procCodeArguments = parseArguments(procedureCode);

      if (args.length !== procCodeArguments.length) {
        throw new Error('Procedure code and argument list do not match');
      }

      if (displayName) {
        displayName = fixDisplayName(displayName);
        var displayNameArguments = parseArguments(displayName);

        if (!compareArrays(procCodeArguments, displayNameArguments)) {
          console.warn("displayName ".concat(displayName, " for ").concat(procedureCode, " has invalid arguments, ignoring it."));
          displayName = procedureCode;
        }
      } else {
        displayName = procedureCode;
      }

      var vm = this.traps.vm;
      vm.addAddonBlock({
        procedureCode: procedureCode,
        arguments: args,
        callback: callback,
        color: '#29beb8',
        secondaryColor: '#3aa8a4',
        displayName: displayName
      });

      if (!_firstAddBlockRan) {
        _firstAddBlockRan = true;
        this.traps.getBlockly().then(function (ScratchBlocks) {
          var BlockSvg = ScratchBlocks.BlockSvg;
          var oldUpdateColour = BlockSvg.prototype.updateColour;

          BlockSvg.prototype.updateColour = function () {
            // procedures_prototype also has a procedure code but we do not want to color them.
            if (this.type === 'procedures_call') {
              var block = this.procCode_ && vm.runtime.getAddonBlock(this.procCode_);

              if (block) {
                this.colour_ = '#29beb8';
                this.colourSecondary_ = '#3aa8a4';
                this.colourTertiary_ = '#3aa8a4';
                this.customContextMenu = null;
              }
            }

            for (var _len = arguments.length, args2 = new Array(_len), _key = 0; _key < _len; _key++) {
              args2[_key] = arguments[_key];
            }

            return oldUpdateColour.call.apply(oldUpdateColour, [this].concat(args2));
          };

          var originalCreateAllInputs = ScratchBlocks.Blocks.procedures_call.createAllInputs_;

          ScratchBlocks.Blocks.procedures_call.createAllInputs_ = function () {
            var block = this.procCode_ && vm.runtime.getAddonBlock(this.procCode_);

            for (var _len2 = arguments.length, args2 = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
              args2[_key2] = arguments[_key2];
            }

            if (block && block.displayName) {
              var originalProcCode = this.procCode_;
              this.procCode_ = block.displayName;
              var ret = originalCreateAllInputs.call.apply(originalCreateAllInputs, [this].concat(args2));
              this.procCode_ = originalProcCode;
              return ret;
            }

            return originalCreateAllInputs.call.apply(originalCreateAllInputs, [this].concat(args2));
          };

          if (vm.editingTarget) {
            vm.emitWorkspaceUpdate();
          }
        });
      }
    }
  }, {
    key: "getCustomBlock",
    value: function getCustomBlock(procedureCode) {
      var vm = this.traps.vm;
      return vm.getAddonBlock(procedureCode);
    }
  }, {
    key: "createBlockContextMenu",
    value: function createBlockContextMenu(callback) {
      var _ref6 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref6$workspace = _ref6.workspace,
          workspace = _ref6$workspace === void 0 ? false : _ref6$workspace,
          _ref6$blocks = _ref6.blocks,
          blocks = _ref6$blocks === void 0 ? false : _ref6$blocks,
          _ref6$flyout = _ref6.flyout,
          flyout = _ref6$flyout === void 0 ? false : _ref6$flyout,
          _ref6$comments = _ref6.comments,
          comments = _ref6$comments === void 0 ? false : _ref6$comments;

      contextMenuCallbacks.push({
        addonId: this._id,
        callback: callback,
        workspace: workspace,
        blocks: blocks,
        flyout: flyout,
        comments: comments
      });
      contextMenuCallbacks.sort(function (b, a) {
        return CONTEXT_MENU_ORDER.indexOf(b.addonId) - CONTEXT_MENU_ORDER.indexOf(a.addonId);
      });
      if (createdAnyBlockContextMenus) return;
      createdAnyBlockContextMenus = true;
      this.traps.getBlockly().then(function (ScratchBlocks) {
        var oldShow = ScratchBlocks.ContextMenu.show;

        ScratchBlocks.ContextMenu.show = function (event, items, rtl) {
          var gesture = ScratchBlocks.mainWorkspace.currentGesture_;
          var block = gesture.targetBlock_; // eslint-disable-next-line no-shadow

          var _iterator8 = _createForOfIteratorHelper(contextMenuCallbacks),
              _step8;

          try {
            for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
              var _step8$value = _step8.value,
                  _callback = _step8$value.callback,
                  _workspace = _step8$value.workspace,
                  _blocks = _step8$value.blocks,
                  _flyout = _step8$value.flyout,
                  _comments = _step8$value.comments;
              var injectMenu = // Workspace
              _workspace && !block && !gesture.flyout_ && !gesture.startBubble_ || _blocks && block && !gesture.flyout_ || _flyout && gesture.flyout_ || _comments && gesture.startBubble_;

              if (injectMenu) {
                try {
                  items = _callback(items, block);
                } catch (e) {
                  console.error('Error while calling context menu callback: ', e);
                }
              }
            }
          } catch (err) {
            _iterator8.e(err);
          } finally {
            _iterator8.f();
          }

          oldShow.call(this, event, items, rtl);
          var blocklyContextMenu = ScratchBlocks.WidgetDiv.DIV.firstChild;
          items.forEach(function (item, i) {
            if (i !== 0 && item.separator) {
              var itemElt = blocklyContextMenu.children[i];
              itemElt.style.paddingTop = '2px';
              itemElt.classList.add('sa-blockly-menu-item-border');
              itemElt.style.borderTop = '1px solid hsla(0, 0%, 0%, 0.15)';
            }
          });
        };
      });
    }
  }, {
    key: "createEditorContextMenu",
    value: function createEditorContextMenu(callback, options) {
      Object(_contextmenu__WEBPACK_IMPORTED_MODULE_9__["addContextMenu"])(this, callback, options);
    }
  }, {
    key: "copyImage",
    value: function copyImage(dataURL) {
      if (!navigator.clipboard.write) {
        return Promise.reject(new Error('Clipboard API not supported'));
      }

      var items = [// eslint-disable-next-line no-undef
      new ClipboardItem({
        'image/png': Object(_lib_data_uri_to_blob__WEBPACK_IMPORTED_MODULE_2__["default"])(dataURL)
      })];
      return navigator.clipboard.write(items);
    }
  }, {
    key: "scratchMessage",
    value: function scratchMessage(id) {
      return tabReduxInstance.state.locales.messages[id];
    }
  }, {
    key: "scratchClass",
    value: function scratchClass() {
      var scratchClasses = getScratchClassNames();
      var classes = [];

      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        args[_key3] = arguments[_key3];
      }

      for (var _i = 0, _args3 = args; _i < _args3.length; _i++) {
        var arg = _args3[_i];

        if (typeof arg === 'string') {
          var _iterator9 = _createForOfIteratorHelper(scratchClasses),
              _step9;

          try {
            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
              var scratchClass = _step9.value;

              if (scratchClass.startsWith("".concat(arg, "_")) && scratchClass.length === arg.length + 6) {
                classes.push(scratchClass);
                break;
              }
            }
          } catch (err) {
            _iterator9.e(err);
          } finally {
            _iterator9.f();
          }
        }
      }

      var options = args[args.length - 1];

      if (_typeof(options) === 'object') {
        var others = Array.isArray(options.others) ? options.others : [options.others];

        var _iterator10 = _createForOfIteratorHelper(others),
            _step10;

        try {
          for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {
            var className = _step10.value;
            classes.push(className);
          }
        } catch (err) {
          _iterator10.e(err);
        } finally {
          _iterator10.f();
        }
      }

      return classes.join(' ');
    }
  }, {
    key: "editorMode",
    get: function get() {
      return getEditorMode();
    }
  }, {
    key: "displayNoneWhileDisabled",
    value: function displayNoneWhileDisabled(el) {
      el.classList.add(getDisplayNoneWhileDisabledClass(this._id));
    }
  }, {
    key: "direction",
    get: function get() {
      return this.redux.state.locales.isRtl ? 'rtl' : 'ltr';
    }
  }, {
    key: "createModal",
    value: function createModal(title) {
      var _ref7 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref7$isOpen = _ref7.isOpen,
          isOpen = _ref7$isOpen === void 0 ? false : _ref7$isOpen;

      return _modal__WEBPACK_IMPORTED_MODULE_10__["createEditorModal"](this, title, {
        isOpen: isOpen
      });
    }
  }, {
    key: "confirm",
    value: function confirm() {
      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
        args[_key4] = arguments[_key4];
      }

      return _modal__WEBPACK_IMPORTED_MODULE_10__["confirm"].apply(_modal__WEBPACK_IMPORTED_MODULE_10__, [this].concat(args));
    }
  }, {
    key: "prompt",
    value: function prompt() {
      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
        args[_key5] = arguments[_key5];
      }

      return _modal__WEBPACK_IMPORTED_MODULE_10__["prompt"].apply(_modal__WEBPACK_IMPORTED_MODULE_10__, [this].concat(args));
    }
  }]);

  return Tab;
}(_event_target__WEBPACK_IMPORTED_MODULE_3__["default"]);

var Settings = /*#__PURE__*/function (_EventTargetShim3) {
  _inherits(Settings, _EventTargetShim3);

  var _super3 = _createSuper(Settings);

  function Settings(addonId, manifest) {
    var _this6;

    _classCallCheck(this, Settings);

    _this6 = _super3.call(this);
    _this6._addonId = addonId;
    _this6._manifest = manifest;
    return _this6;
  }

  _createClass(Settings, [{
    key: "get",
    value: function get(id) {
      return _settings_store_singleton__WEBPACK_IMPORTED_MODULE_1__["default"].getAddonSetting(this._addonId, id);
    }
  }]);

  return Settings;
}(_event_target__WEBPACK_IMPORTED_MODULE_3__["default"]);

var Self = /*#__PURE__*/function (_EventTargetShim4) {
  _inherits(Self, _EventTargetShim4);

  var _super4 = _createSuper(Self);

  function Self(id) {
    var _this7;

    _classCallCheck(this, Self);

    _this7 = _super4.call(this);
    _this7.id = id;
    _this7.disabled = false;
    return _this7;
  } // These are removed at build-time by pull.js. Throw if attempting to access them at runtime.


  _createClass(Self, [{
    key: "dir",
    get: function get() {
      throw new Error("Addon tried to access addon.self.dir");
    }
  }, {
    key: "lib",
    get: function get() {
      throw new Error("Addon tried to access addon.self.lib");
    }
  }]);

  return Self;
}(_event_target__WEBPACK_IMPORTED_MODULE_3__["default"]);

var AddonRunner = /*#__PURE__*/function () {
  function AddonRunner(id) {
    _classCallCheck(this, AddonRunner);

    AddonRunner.instances.push(this);
    var manifest = _generated_addon_manifests__WEBPACK_IMPORTED_MODULE_5__["default"][id];
    this.id = id;
    this.manifest = manifest;
    this.messageCache = {};
    this.stylesheets = [];
    this.disabledStylesheet = null;
    this.loading = true;
    this.publicAPI = {
      global: global,
      console: console,
      addon: {
        tab: new Tab(id),
        settings: new Settings(id, manifest),
        self: new Self(id)
      },
      msg: this.msg.bind(this),
      safeMsg: this.safeMsg.bind(this)
    };
  }

  _createClass(AddonRunner, [{
    key: "_msg",
    value: function _msg(key, vars, handler) {
      var namespacedKey = "".concat(this.id, "/").concat(key);

      if (this.messageCache[namespacedKey]) {
        return this.messageCache[namespacedKey].format(vars);
      }

      var translation = _addons_l10n_en_json__WEBPACK_IMPORTED_MODULE_6__[namespacedKey];

      if (!translation) {
        return namespacedKey;
      }

      if (handler) {
        translation = handler(translation);
      }

      var messageFormat = new intl_messageformat__WEBPACK_IMPORTED_MODULE_0___default.a(translation, language);
      this.messageCache[namespacedKey] = messageFormat;
      return messageFormat.format(vars);
    }
  }, {
    key: "msg",
    value: function msg(key, vars) {
      return this._msg(key, vars, null);
    }
  }, {
    key: "safeMsg",
    value: function safeMsg(key, vars) {
      return this._msg(key, vars, escapeHTML);
    }
  }, {
    key: "settingsChanged",
    value: function settingsChanged() {
      this.publicAPI.addon.settings.dispatchEvent(new CustomEvent('change'));
      this.updateCSSVariables();
    }
  }, {
    key: "updateCSSVariables",
    value: function updateCSSVariables() {
      if (this.manifest.settings) {
        var kebabCaseId = kebabCaseToCamelCase(this.id);

        var _iterator11 = _createForOfIteratorHelper(this.manifest.settings),
            _step11;

        try {
          for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {
            var setting = _step11.value;
            var settingId = setting.id;
            var variable = "--".concat(kebabCaseId, "-").concat(kebabCaseToCamelCase(settingId));
            var value = this.publicAPI.addon.settings.get(settingId);
            document.documentElement.style.setProperty(variable, value);
          }
        } catch (err) {
          _iterator11.e(err);
        } finally {
          _iterator11.f();
        }
      }
    }
  }, {
    key: "meetsCondition",
    value: function meetsCondition(condition) {
      if (!condition) {
        // No condition, so always active.
        return true;
      }

      if (condition.settings) {
        for (var _i2 = 0, _Object$entries = Object.entries(condition.settings); _i2 < _Object$entries.length; _i2++) {
          var _Object$entries$_i = _slicedToArray(_Object$entries[_i2], 2),
              settingId = _Object$entries$_i[0],
              expectedValue = _Object$entries$_i[1];

          if (this.publicAPI.addon.settings.get(settingId) !== expectedValue) {
            return false;
          }
        }
      }

      return true;
    }
  }, {
    key: "dynamicEnable",
    value: function dynamicEnable() {
      if (this.loading) {
        return;
      }

      this.appendStylesheets();

      if (this.disabledStylesheet) {
        this.disabledStylesheet.remove();
        this.disabledStylesheet = null;
      }

      this.publicAPI.addon.self.disabled = false;
      this.publicAPI.addon.self.dispatchEvent(new CustomEvent('reenabled'));
    }
  }, {
    key: "dynamicDisable",
    value: function dynamicDisable() {
      if (this.loading) {
        return;
      }

      this.removeStylesheets();
      var disabledCSS = ".".concat(getDisplayNoneWhileDisabledClass(this.id), "{display:none !important;}");
      this.disabledStylesheet = createStylesheet(disabledCSS);
      addStylesheet(this.disabledStylesheet);
      this.publicAPI.addon.self.disabled = true;
      this.publicAPI.addon.self.dispatchEvent(new CustomEvent('disabled'));
    }
  }, {
    key: "removeStylesheets",
    value: function removeStylesheets() {
      var _iterator12 = _createForOfIteratorHelper(this.stylesheets),
          _step12;

      try {
        for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {
          var style = _step12.value;
          style.remove();
        }
      } catch (err) {
        _iterator12.e(err);
      } finally {
        _iterator12.f();
      }
    }
  }, {
    key: "appendStylesheets",
    value: function appendStylesheets() {
      var _iterator13 = _createForOfIteratorHelper(this.stylesheets),
          _step13;

      try {
        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {
          var style = _step13.value;
          addStylesheet(style);
        }
      } catch (err) {
        _iterator13.e(err);
      } finally {
        _iterator13.f();
      }
    }
  }, {
    key: "run",
    value: function () {
      var _run = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
        var _yield$addonEntries$t, resources, _iterator14, _step14, userstyle, m, source, style, _iterator15, _step15, userscript, fn;

        return regeneratorRuntime.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                if (!this.manifest.editorOnly) {
                  _context3.next = 3;
                  break;
                }

                _context3.next = 3;
                return untilInEditor();

              case 3:
                _context3.next = 5;
                return _generated_addon_entries__WEBPACK_IMPORTED_MODULE_8__["default"][this.id]();

              case 5:
                _yield$addonEntries$t = _context3.sent;
                resources = _yield$addonEntries$t.resources;

                if (this.manifest.noTranslations) {
                  _context3.next = 10;
                  break;
                }

                _context3.next = 10;
                return addonMessagesPromise;

              case 10:
                this.updateCSSVariables();

                if (!this.manifest.userstyles) {
                  _context3.next = 35;
                  break;
                }

                _iterator14 = _createForOfIteratorHelper(this.manifest.userstyles);
                _context3.prev = 13;

                _iterator14.s();

              case 15:
                if ((_step14 = _iterator14.n()).done) {
                  _context3.next = 27;
                  break;
                }

                userstyle = _step14.value;

                if (this.meetsCondition(userstyle.if)) {
                  _context3.next = 19;
                  break;
                }

                return _context3.abrupt("continue", 25);

              case 19:
                m = resources[userstyle.url];
                source = m[0][1];
                style = createStylesheet(source);
                style.className = 'scratch-addons-theme';
                style.dataset.addonId = this.id;
                this.stylesheets.push(style);

              case 25:
                _context3.next = 15;
                break;

              case 27:
                _context3.next = 32;
                break;

              case 29:
                _context3.prev = 29;
                _context3.t0 = _context3["catch"](13);

                _iterator14.e(_context3.t0);

              case 32:
                _context3.prev = 32;

                _iterator14.f();

                return _context3.finish(32);

              case 35:
                this.appendStylesheets();

                if (!this.manifest.userscripts) {
                  _context3.next = 56;
                  break;
                }

                _iterator15 = _createForOfIteratorHelper(this.manifest.userscripts);
                _context3.prev = 38;

                _iterator15.s();

              case 40:
                if ((_step15 = _iterator15.n()).done) {
                  _context3.next = 48;
                  break;
                }

                userscript = _step15.value;

                if (this.meetsCondition(userscript.if)) {
                  _context3.next = 44;
                  break;
                }

                return _context3.abrupt("continue", 46);

              case 44:
                fn = resources[userscript.url];
                fn(this.publicAPI);

              case 46:
                _context3.next = 40;
                break;

              case 48:
                _context3.next = 53;
                break;

              case 50:
                _context3.prev = 50;
                _context3.t1 = _context3["catch"](38);

                _iterator15.e(_context3.t1);

              case 53:
                _context3.prev = 53;

                _iterator15.f();

                return _context3.finish(53);

              case 56:
                this.loading = false;

              case 57:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this, [[13, 29, 32, 35], [38, 50, 53, 56]]);
      }));

      function run() {
        return _run.apply(this, arguments);
      }

      return run;
    }()
  }]);

  return AddonRunner;
}();

AddonRunner.instances = [];

var runAddon = function runAddon(addonId) {
  var runner = new AddonRunner(addonId);
  runner.run();
};

var oldMode = getEditorMode();

var emitUrlChange = function emitUrlChange() {
  // In Scratch, URL changes usually mean someone went from editor to fullscreen or something like that.
  // This is not the case in TW -- the URL can change for many other reasons that addons probably aren't prepared
  // to handle.
  var newMode = getEditorMode();

  if (newMode !== oldMode) {
    oldMode = newMode;
    setTimeout(function () {
      var _iterator16 = _createForOfIteratorHelper(AddonRunner.instances),
          _step16;

      try {
        for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {
          var addon = _step16.value;
          addon.publicAPI.addon.tab.dispatchEvent(new CustomEvent('urlChange'));
        }
      } catch (err) {
        _iterator16.e(err);
      } finally {
        _iterator16.f();
      }
    });
  }
};

var originalReplaceState = history.replaceState;

history.replaceState = function () {
  for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
    args[_key6] = arguments[_key6];
  }

  originalReplaceState.apply(this, args);
  emitUrlChange();
};

var originalPushState = history.pushState;

history.pushState = function () {
  for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
    args[_key7] = arguments[_key7];
  }

  originalPushState.apply(this, args);
  emitUrlChange();
};

_settings_store_singleton__WEBPACK_IMPORTED_MODULE_1__["default"].addEventListener('addon-changed', function (e) {
  var addonId = e.detail.addonId;
  var runner = AddonRunner.instances.find(function (i) {
    return i.id === addonId;
  });

  if (runner) {
    runner.settingsChanged();
  }

  if (e.detail.dynamicEnable) {
    if (runner) {
      runner.dynamicEnable();
    } else {
      runAddon(addonId);
    }
  } else if (e.detail.dynamicDisable) {
    if (runner) {
      runner.dynamicDisable();
    }
  }
});

for (var _i3 = 0, _Object$keys = Object.keys(_generated_addon_manifests__WEBPACK_IMPORTED_MODULE_5__["default"]); _i3 < _Object$keys.length; _i3++) {
  var id = _Object$keys[_i3];

  if (!_settings_store_singleton__WEBPACK_IMPORTED_MODULE_1__["default"].getAddonEnabled(id)) {
    continue;
  }

  runAddon(id);
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./src/addons/contextmenu.js":
/*!***********************************!*\
  !*** ./src/addons/contextmenu.js ***!
  \***********************************/
/*! exports provided: addContextMenu */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addContextMenu", function() { return addContextMenu; });
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

// This file is imported from
// https://github.com/ScratchAddons/ScratchAddons/blob/master/addon-api/content-script/contextmenu.js

/* eslint-disable */
var initialized = false;
var hasDynamicContextMenu = false;
var contextMenus = [];

var onReactContextMenu = function onReactContextMenu(e) {
  var _this = this,
      _ctxTarget$this$traps10,
      _ctxTarget$this$traps11,
      _ctxTarget$this$traps12,
      _ctxTarget$this$traps13,
      _ctxTarget$this$traps14,
      _ctxTarget$this$traps15;

  if (!e.target) return;
  var ctxTarget = e.target.closest(".react-contextmenu-wrapper");
  if (!ctxTarget) return;
  var ctxMenu = ctxTarget.querySelector("nav.react-contextmenu");
  var type;
  var extra = {};

  if (false) { var props, mInternalId, _ctxTarget$this$traps, _ctxTarget$this$traps2, _ctxTarget$this$traps3, _ctxTarget$this$traps4, _ctxTarget$this$traps5, _ctxTarget$this$traps6, _ctxTarget$this$traps7, _ctxTarget$this$traps8, _ctxTarget$this$traps9; } else if ((_ctxTarget$this$traps10 = ctxTarget[this.traps.getInternalKey(ctxTarget)]) !== null && _ctxTarget$this$traps10 !== void 0 && (_ctxTarget$this$traps11 = _ctxTarget$this$traps10.return) !== null && _ctxTarget$this$traps11 !== void 0 && (_ctxTarget$this$traps12 = _ctxTarget$this$traps11.return) !== null && _ctxTarget$this$traps12 !== void 0 && (_ctxTarget$this$traps13 = _ctxTarget$this$traps12.return) !== null && _ctxTarget$this$traps13 !== void 0 && (_ctxTarget$this$traps14 = _ctxTarget$this$traps13.stateNode) !== null && _ctxTarget$this$traps14 !== void 0 && (_ctxTarget$this$traps15 = _ctxTarget$this$traps14.props) !== null && _ctxTarget$this$traps15 !== void 0 && _ctxTarget$this$traps15.dragType) {
    // SpriteSelectorItem which despite its name is used for costumes, sounds, backpacked script etc
    var _props = ctxTarget[this.traps.getInternalKey(ctxTarget)].return.return.return.stateNode.props;
    type = _props.dragType.toLowerCase();
    extra.name = _props.name;
    extra.itemId = _props.id;
    extra.index = _props.index;
  } else {
    return;
  }

  var ctx = _objectSpread({
    menuItem: ctxMenu,
    target: ctxTarget,
    type: type
  }, extra);

  Array.from(ctxMenu.children).forEach(function (existing) {
    if (existing.classList.contains("sa-ctx-menu")) existing.remove();
  });

  var _iterator = _createForOfIteratorHelper(hasDynamicContextMenu ? contextMenus.flatMap(function (menu) {
    return typeof menu === "function" ? menu(type, ctx) : menu;
  }) : contextMenus),
      _step;

  try {
    var _loop = function _loop() {
      var item = _step.value;
      if (!item) return "continue";
      if (item.types && !item.types.some(function (itemType) {
        return type === itemType;
      })) return "continue";
      if (item.condition && !item.condition(ctx)) return "continue";
      var itemElem = document.createElement("div");
      var classes = ["context-menu_menu-item"];
      if (item.border) classes.push("context-menu_menu-item-bordered");
      if (item.dangerous) classes.push("context-menu_menu-item-danger");
      itemElem.className = _this.scratchClass.apply(_this, classes.concat([{
        others: ["react-contextmenu-item", "sa-ctx-menu", item.className || ""]
      }]));
      var label = document.createElement("span");
      label.textContent = item.label;
      itemElem.append(label);

      _this.displayNoneWhileDisabled(itemElem, {
        display: "block"
      });

      itemElem.addEventListener("click", function (e) {
        e.stopPropagation();
        window.dispatchEvent(new CustomEvent("REACT_CONTEXTMENU_HIDE", {
          detail: {
            action: "REACT_CONTEXTMENU_HIDE"
          }
        }));
        item.callback(ctx);
      });

      _this.appendToSharedSpace({
        space: item.position,
        order: item.order,
        scope: ctxMenu,
        element: itemElem
      });
    };

    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var _ret = _loop();

      if (_ret === "continue") continue;
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  return;
};

var initialize = function initialize(tab) {
  if (initialized) return;
  initialized = true;
  document.body.addEventListener("contextmenu", function (e) {
    return onReactContextMenu.call(tab, e);
  }, {
    capture: true
  });
};

var addContextMenu = function addContextMenu(tab, callback, opts) {
  if (typeof opts === "undefined") {
    contextMenus.push(callback);
    hasDynamicContextMenu = true;
  } else {
    contextMenus.push(_objectSpread(_objectSpread({}, opts), {}, {
      callback: callback
    }));
  }

  initialize(tab);
};

/***/ }),

/***/ "./src/addons/generated/addon-entries.js":
/*!***********************************************!*\
  !*** ./src/addons/generated/addon-entries.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* generated by pull.js */
/* harmony default export */ __webpack_exports__["default"] = ({
  "cat-blocks": function catBlocks() {
    return __webpack_require__.e(/*! import() | addon-entry-cat-blocks */ "addon-entry-cat-blocks").then(__webpack_require__.bind(null, /*! ../addons/cat-blocks/_runtime_entry.js */ "./src/addons/addons/cat-blocks/_runtime_entry.js"));
  },
  "editor-devtools": function editorDevtools() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/editor-devtools/_runtime_entry.js */ "./src/addons/addons/editor-devtools/_runtime_entry.js"));
  },
  "editor-searchable-dropdowns": function editorSearchableDropdowns() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/editor-searchable-dropdowns/_runtime_entry.js */ "./src/addons/addons/editor-searchable-dropdowns/_runtime_entry.js"));
  },
  "data-category-tweaks-v2": function dataCategoryTweaksV2() {
    return __webpack_require__.e(/*! import() | addon-entry-data-category-tweaks-v2 */ "addon-entry-data-category-tweaks-v2").then(__webpack_require__.bind(null, /*! ../addons/data-category-tweaks-v2/_runtime_entry.js */ "./src/addons/addons/data-category-tweaks-v2/_runtime_entry.js"));
  },
  "block-palette-icons": function blockPaletteIcons() {
    return __webpack_require__.e(/*! import() | addon-entry-block-palette-icons */ "addon-entry-block-palette-icons").then(__webpack_require__.bind(null, /*! ../addons/block-palette-icons/_runtime_entry.js */ "./src/addons/addons/block-palette-icons/_runtime_entry.js"));
  },
  "hide-flyout": function hideFlyout() {
    return __webpack_require__.e(/*! import() | addon-entry-hide-flyout */ "addon-entry-hide-flyout").then(__webpack_require__.bind(null, /*! ../addons/hide-flyout/_runtime_entry.js */ "./src/addons/addons/hide-flyout/_runtime_entry.js"));
  },
  "mediarecorder": function mediarecorder() {
    return __webpack_require__.e(/*! import() | addon-entry-mediarecorder */ "addon-entry-mediarecorder").then(__webpack_require__.bind(null, /*! ../addons/mediarecorder/_runtime_entry.js */ "./src/addons/addons/mediarecorder/_runtime_entry.js"));
  },
  "drag-drop": function dragDrop() {
    return __webpack_require__(/*! ../addons/drag-drop/_runtime_entry.js */ "./src/addons/addons/drag-drop/_runtime_entry.js");
  },
  "debugger": function _debugger() {
    return __webpack_require__.e(/*! import() | addon-entry-debugger */ "addon-entry-debugger").then(__webpack_require__.bind(null, /*! ../addons/debugger/_runtime_entry.js */ "./src/addons/addons/debugger/_runtime_entry.js"));
  },
  "pause": function pause() {
    return __webpack_require__(/*! ../addons/pause/_runtime_entry.js */ "./src/addons/addons/pause/_runtime_entry.js");
  },
  "mute-project": function muteProject() {
    return __webpack_require__(/*! ../addons/mute-project/_runtime_entry.js */ "./src/addons/addons/mute-project/_runtime_entry.js");
  },
  "clones": function clones() {
    return __webpack_require__.e(/*! import() | addon-entry-clones */ "addon-entry-clones").then(__webpack_require__.bind(null, /*! ../addons/clones/_runtime_entry.js */ "./src/addons/addons/clones/_runtime_entry.js"));
  },
  "mouse-pos": function mousePos() {
    return __webpack_require__.e(/*! import() | addon-entry-mouse-pos */ "addon-entry-mouse-pos").then(__webpack_require__.bind(null, /*! ../addons/mouse-pos/_runtime_entry.js */ "./src/addons/addons/mouse-pos/_runtime_entry.js"));
  },
  "color-picker": function colorPicker() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/color-picker/_runtime_entry.js */ "./src/addons/addons/color-picker/_runtime_entry.js"));
  },
  "remove-sprite-confirm": function removeSpriteConfirm() {
    return __webpack_require__.e(/*! import() | addon-entry-remove-sprite-confirm */ "addon-entry-remove-sprite-confirm").then(__webpack_require__.bind(null, /*! ../addons/remove-sprite-confirm/_runtime_entry.js */ "./src/addons/addons/remove-sprite-confirm/_runtime_entry.js"));
  },
  "block-count": function blockCount() {
    return __webpack_require__.e(/*! import() | addon-entry-block-count */ "addon-entry-block-count").then(__webpack_require__.bind(null, /*! ../addons/block-count/_runtime_entry.js */ "./src/addons/addons/block-count/_runtime_entry.js"));
  },
  "onion-skinning": function onionSkinning() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/onion-skinning/_runtime_entry.js */ "./src/addons/addons/onion-skinning/_runtime_entry.js"));
  },
  "default-costume-editor-color": function defaultCostumeEditorColor() {
    return __webpack_require__.e(/*! import() | addon-entry-default-costume-editor-color */ "addon-entry-default-costume-editor-color").then(__webpack_require__.bind(null, /*! ../addons/default-costume-editor-color/_runtime_entry.js */ "./src/addons/addons/default-costume-editor-color/_runtime_entry.js"));
  },
  "bitmap-copy": function bitmapCopy() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/bitmap-copy/_runtime_entry.js */ "./src/addons/addons/bitmap-copy/_runtime_entry.js"));
  },
  "2d-color-picker": function dColorPicker() {
    return __webpack_require__.e(/*! import() | addon-entry-2d-color-picker */ "addon-entry-2d-color-picker").then(__webpack_require__.bind(null, /*! ../addons/2d-color-picker/_runtime_entry.js */ "./src/addons/addons/2d-color-picker/_runtime_entry.js"));
  },
  "better-img-uploads": function betterImgUploads() {
    return __webpack_require__.e(/*! import() | addon-entry-better-img-uploads */ "addon-entry-better-img-uploads").then(__webpack_require__.bind(null, /*! ../addons/better-img-uploads/_runtime_entry.js */ "./src/addons/addons/better-img-uploads/_runtime_entry.js"));
  },
  "pick-colors-from-stage": function pickColorsFromStage() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/pick-colors-from-stage/_runtime_entry.js */ "./src/addons/addons/pick-colors-from-stage/_runtime_entry.js"));
  },
  "custom-block-shape": function customBlockShape() {
    return __webpack_require__.e(/*! import() | addon-entry-custom-block-shape */ "addon-entry-custom-block-shape").then(__webpack_require__.bind(null, /*! ../addons/custom-block-shape/_runtime_entry.js */ "./src/addons/addons/custom-block-shape/_runtime_entry.js"));
  },
  "zebra-striping": function zebraStriping() {
    return __webpack_require__.e(/*! import() | addon-entry-zebra-striping */ "addon-entry-zebra-striping").then(__webpack_require__.bind(null, /*! ../addons/zebra-striping/_runtime_entry.js */ "./src/addons/addons/zebra-striping/_runtime_entry.js"));
  },
  "editor-theme3": function editorTheme3() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-theme3 */ "addon-entry-editor-theme3").then(__webpack_require__.bind(null, /*! ../addons/editor-theme3/_runtime_entry.js */ "./src/addons/addons/editor-theme3/_runtime_entry.js"));
  },
  "custom-block-text": function customBlockText() {
    return __webpack_require__.e(/*! import() | addon-entry-custom-block-text */ "addon-entry-custom-block-text").then(__webpack_require__.bind(null, /*! ../addons/custom-block-text/_runtime_entry.js */ "./src/addons/addons/custom-block-text/_runtime_entry.js"));
  },
  "editor-colored-context-menus": function editorColoredContextMenus() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-colored-context-menus */ "addon-entry-editor-colored-context-menus").then(__webpack_require__.bind(null, /*! ../addons/editor-colored-context-menus/_runtime_entry.js */ "./src/addons/addons/editor-colored-context-menus/_runtime_entry.js"));
  },
  "editor-stage-left": function editorStageLeft() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-stage-left */ "addon-entry-editor-stage-left").then(__webpack_require__.bind(null, /*! ../addons/editor-stage-left/_runtime_entry.js */ "./src/addons/addons/editor-stage-left/_runtime_entry.js"));
  },
  "editor-buttons-reverse-order": function editorButtonsReverseOrder() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-buttons-reverse-order */ "addon-entry-editor-buttons-reverse-order").then(__webpack_require__.bind(null, /*! ../addons/editor-buttons-reverse-order/_runtime_entry.js */ "./src/addons/addons/editor-buttons-reverse-order/_runtime_entry.js"));
  },
  "variable-manager": function variableManager() {
    return __webpack_require__.e(/*! import() | addon-entry-variable-manager */ "addon-entry-variable-manager").then(__webpack_require__.bind(null, /*! ../addons/variable-manager/_runtime_entry.js */ "./src/addons/addons/variable-manager/_runtime_entry.js"));
  },
  "search-sprites": function searchSprites() {
    return __webpack_require__.e(/*! import() | addon-entry-search-sprites */ "addon-entry-search-sprites").then(__webpack_require__.bind(null, /*! ../addons/search-sprites/_runtime_entry.js */ "./src/addons/addons/search-sprites/_runtime_entry.js"));
  },
  "gamepad": function gamepad() {
    return __webpack_require__.e(/*! import() | addon-entry-gamepad */ "addon-entry-gamepad").then(__webpack_require__.bind(null, /*! ../addons/gamepad/_runtime_entry.js */ "./src/addons/addons/gamepad/_runtime_entry.js"));
  },
  "editor-sounds": function editorSounds() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-sounds */ "addon-entry-editor-sounds").then(__webpack_require__.bind(null, /*! ../addons/editor-sounds/_runtime_entry.js */ "./src/addons/addons/editor-sounds/_runtime_entry.js"));
  },
  "folders": function folders() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/folders/_runtime_entry.js */ "./src/addons/addons/folders/_runtime_entry.js"));
  },
  "block-switching": function blockSwitching() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/block-switching/_runtime_entry.js */ "./src/addons/addons/block-switching/_runtime_entry.js"));
  },
  "load-extensions": function loadExtensions() {
    return __webpack_require__.e(/*! import() | addon-entry-load-extensions */ "addon-entry-load-extensions").then(__webpack_require__.bind(null, /*! ../addons/load-extensions/_runtime_entry.js */ "./src/addons/addons/load-extensions/_runtime_entry.js"));
  },
  "custom-zoom": function customZoom() {
    return __webpack_require__.e(/*! import() | addon-entry-custom-zoom */ "addon-entry-custom-zoom").then(__webpack_require__.bind(null, /*! ../addons/custom-zoom/_runtime_entry.js */ "./src/addons/addons/custom-zoom/_runtime_entry.js"));
  },
  "initialise-sprite-position": function initialiseSpritePosition() {
    return __webpack_require__.e(/*! import() | addon-entry-initialise-sprite-position */ "addon-entry-initialise-sprite-position").then(__webpack_require__.bind(null, /*! ../addons/initialise-sprite-position/_runtime_entry.js */ "./src/addons/addons/initialise-sprite-position/_runtime_entry.js"));
  },
  "blocks2image": function blocks2image() {
    return __webpack_require__.e(/*! import() | addon-entry-blocks2image */ "addon-entry-blocks2image").then(__webpack_require__.bind(null, /*! ../addons/blocks2image/_runtime_entry.js */ "./src/addons/addons/blocks2image/_runtime_entry.js"));
  },
  "remove-curved-stage-border": function removeCurvedStageBorder() {
    return __webpack_require__.e(/*! import() | addon-entry-remove-curved-stage-border */ "addon-entry-remove-curved-stage-border").then(__webpack_require__.bind(null, /*! ../addons/remove-curved-stage-border/_runtime_entry.js */ "./src/addons/addons/remove-curved-stage-border/_runtime_entry.js"));
  },
  "transparent-orphans": function transparentOrphans() {
    return __webpack_require__.e(/*! import() | addon-entry-transparent-orphans */ "addon-entry-transparent-orphans").then(__webpack_require__.bind(null, /*! ../addons/transparent-orphans/_runtime_entry.js */ "./src/addons/addons/transparent-orphans/_runtime_entry.js"));
  },
  "paint-by-default": function paintByDefault() {
    return __webpack_require__.e(/*! import() | addon-entry-paint-by-default */ "addon-entry-paint-by-default").then(__webpack_require__.bind(null, /*! ../addons/paint-by-default/_runtime_entry.js */ "./src/addons/addons/paint-by-default/_runtime_entry.js"));
  },
  "block-cherry-picking": function blockCherryPicking() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/block-cherry-picking/_runtime_entry.js */ "./src/addons/addons/block-cherry-picking/_runtime_entry.js"));
  },
  "hide-new-variables": function hideNewVariables() {
    return __webpack_require__.e(/*! import() | addon-entry-hide-new-variables */ "addon-entry-hide-new-variables").then(__webpack_require__.bind(null, /*! ../addons/hide-new-variables/_runtime_entry.js */ "./src/addons/addons/hide-new-variables/_runtime_entry.js"));
  },
  "editor-extra-keys": function editorExtraKeys() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-extra-keys */ "addon-entry-editor-extra-keys").then(__webpack_require__.bind(null, /*! ../addons/editor-extra-keys/_runtime_entry.js */ "./src/addons/addons/editor-extra-keys/_runtime_entry.js"));
  },
  "hide-delete-button": function hideDeleteButton() {
    return __webpack_require__.e(/*! import() | addon-entry-hide-delete-button */ "addon-entry-hide-delete-button").then(__webpack_require__.bind(null, /*! ../addons/hide-delete-button/_runtime_entry.js */ "./src/addons/addons/hide-delete-button/_runtime_entry.js"));
  },
  "no-script-bumping": function noScriptBumping() {
    return __webpack_require__.e(/*! import() | addon-entry-no-script-bumping */ "addon-entry-no-script-bumping").then(__webpack_require__.bind(null, /*! ../addons/no-script-bumping/_runtime_entry.js */ "./src/addons/addons/no-script-bumping/_runtime_entry.js"));
  },
  "disable-stage-drag-select": function disableStageDragSelect() {
    return __webpack_require__.e(/*! import() | addon-entry-disable-stage-drag-select */ "addon-entry-disable-stage-drag-select").then(__webpack_require__.bind(null, /*! ../addons/disable-stage-drag-select/_runtime_entry.js */ "./src/addons/addons/disable-stage-drag-select/_runtime_entry.js"));
  },
  "move-to-top-bottom": function moveToTopBottom() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/move-to-top-bottom/_runtime_entry.js */ "./src/addons/addons/move-to-top-bottom/_runtime_entry.js"));
  },
  "disable-paste-offset": function disablePasteOffset() {
    return __webpack_require__.e(/*! import() | addon-entry-disable-paste-offset */ "addon-entry-disable-paste-offset").then(__webpack_require__.bind(null, /*! ../addons/disable-paste-offset/_runtime_entry.js */ "./src/addons/addons/disable-paste-offset/_runtime_entry.js"));
  },
  "block-duplicate": function blockDuplicate() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/block-duplicate/_runtime_entry.js */ "./src/addons/addons/block-duplicate/_runtime_entry.js"));
  },
  "swap-local-global": function swapLocalGlobal() {
    return __webpack_require__.e(/*! import() | addon-entry-swap-local-global */ "addon-entry-swap-local-global").then(__webpack_require__.bind(null, /*! ../addons/swap-local-global/_runtime_entry.js */ "./src/addons/addons/swap-local-global/_runtime_entry.js"));
  },
  "editor-comment-previews": function editorCommentPreviews() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/editor-comment-previews/_runtime_entry.js */ "./src/addons/addons/editor-comment-previews/_runtime_entry.js"));
  },
  "columns": function columns() {
    return __webpack_require__.e(/*! import() | addon-entry-columns */ "addon-entry-columns").then(__webpack_require__.bind(null, /*! ../addons/columns/_runtime_entry.js */ "./src/addons/addons/columns/_runtime_entry.js"));
  },
  "script-snap": function scriptSnap() {
    return __webpack_require__.e(/*! import() | addon-entry-script-snap */ "addon-entry-script-snap").then(__webpack_require__.bind(null, /*! ../addons/script-snap/_runtime_entry.js */ "./src/addons/addons/script-snap/_runtime_entry.js"));
  },
  "fullscreen": function fullscreen() {
    return __webpack_require__.e(/*! import() | addon-entry-fullscreen */ "addon-entry-fullscreen").then(__webpack_require__.bind(null, /*! ../addons/fullscreen/_runtime_entry.js */ "./src/addons/addons/fullscreen/_runtime_entry.js"));
  },
  "hide-stage": function hideStage() {
    return __webpack_require__.e(/*! import() | addon-entry-hide-stage */ "addon-entry-hide-stage").then(__webpack_require__.bind(null, /*! ../addons/hide-stage/_runtime_entry.js */ "./src/addons/addons/hide-stage/_runtime_entry.js"));
  },
  "tw-straighten-comments": function twStraightenComments() {
    return __webpack_require__.e(/*! import() | addon-entry-tw-straighten-comments */ "addon-entry-tw-straighten-comments").then(__webpack_require__.bind(null, /*! ../addons/tw-straighten-comments/_runtime_entry.js */ "./src/addons/addons/tw-straighten-comments/_runtime_entry.js"));
  },
  "tw-remove-backpack": function twRemoveBackpack() {
    return __webpack_require__.e(/*! import() | addon-entry-tw-remove-backpack */ "addon-entry-tw-remove-backpack").then(__webpack_require__.bind(null, /*! ../addons/tw-remove-backpack/_runtime_entry.js */ "./src/addons/addons/tw-remove-backpack/_runtime_entry.js"));
  },
  "tw-remove-feedback": function twRemoveFeedback() {
    return __webpack_require__.e(/*! import() | addon-entry-tw-remove-feedback */ "addon-entry-tw-remove-feedback").then(__webpack_require__.bind(null, /*! ../addons/tw-remove-feedback/_runtime_entry.js */ "./src/addons/addons/tw-remove-feedback/_runtime_entry.js"));
  },
  "tw-disable-compiler": function twDisableCompiler() {
    return __webpack_require__.e(/*! import() | addon-entry-tw-disable-compiler */ "addon-entry-tw-disable-compiler").then(__webpack_require__.bind(null, /*! ../addons/tw-disable-compiler/_runtime_entry.js */ "./src/addons/addons/tw-disable-compiler/_runtime_entry.js"));
  },
  "editor-stepping": function editorStepping() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-stepping */ "addon-entry-editor-stepping").then(__webpack_require__.bind(null, /*! ../addons/editor-stepping/_runtime_entry.js */ "./src/addons/addons/editor-stepping/_runtime_entry.js"));
  }
});

/***/ }),

/***/ "./src/addons/generated/l10n-entries.js":
/*!**********************************************!*\
  !*** ./src/addons/generated/l10n-entries.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* generated by pull.js */
/* harmony default export */ __webpack_exports__["default"] = ({
  "de": function de() {
    return __webpack_require__.e(/*! import() | addon-l10n-de */ "addon-l10n-de").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/de.json */ "./src/addons/addons-l10n/de.json", 3));
  },
  "es": function es() {
    return __webpack_require__.e(/*! import() | addon-l10n-es */ "addon-l10n-es").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/es.json */ "./src/addons/addons-l10n/es.json", 3));
  },
  "fr": function fr() {
    return __webpack_require__.e(/*! import() | addon-l10n-fr */ "addon-l10n-fr").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/fr.json */ "./src/addons/addons-l10n/fr.json", 3));
  },
  "hu": function hu() {
    return __webpack_require__.e(/*! import() | addon-l10n-hu */ "addon-l10n-hu").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/hu.json */ "./src/addons/addons-l10n/hu.json", 3));
  },
  "it": function it() {
    return __webpack_require__.e(/*! import() | addon-l10n-it */ "addon-l10n-it").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/it.json */ "./src/addons/addons-l10n/it.json", 3));
  },
  "ja": function ja() {
    return __webpack_require__.e(/*! import() | addon-l10n-ja */ "addon-l10n-ja").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/ja.json */ "./src/addons/addons-l10n/ja.json", 3));
  },
  "ko": function ko() {
    return __webpack_require__.e(/*! import() | addon-l10n-ko */ "addon-l10n-ko").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/ko.json */ "./src/addons/addons-l10n/ko.json", 3));
  },
  "nl": function nl() {
    return __webpack_require__.e(/*! import() | addon-l10n-nl */ "addon-l10n-nl").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/nl.json */ "./src/addons/addons-l10n/nl.json", 3));
  },
  "pl": function pl() {
    return __webpack_require__.e(/*! import() | addon-l10n-pl */ "addon-l10n-pl").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/pl.json */ "./src/addons/addons-l10n/pl.json", 3));
  },
  "pt": function pt() {
    return __webpack_require__.e(/*! import() | addon-l10n-pt */ "addon-l10n-pt").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/pt.json */ "./src/addons/addons-l10n/pt.json", 3));
  },
  "ro": function ro() {
    return __webpack_require__.e(/*! import() | addon-l10n-ro */ "addon-l10n-ro").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/ro.json */ "./src/addons/addons-l10n/ro.json", 3));
  },
  "ru": function ru() {
    return __webpack_require__.e(/*! import() | addon-l10n-ru */ "addon-l10n-ru").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/ru.json */ "./src/addons/addons-l10n/ru.json", 3));
  },
  "sl": function sl() {
    return __webpack_require__.e(/*! import() | addon-l10n-sl */ "addon-l10n-sl").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/sl.json */ "./src/addons/addons-l10n/sl.json", 3));
  },
  "tr": function tr() {
    return __webpack_require__.e(/*! import() | addon-l10n-tr */ "addon-l10n-tr").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/tr.json */ "./src/addons/addons-l10n/tr.json", 3));
  }
});

/***/ }),

/***/ "./src/addons/modal.css":
/*!******************************!*\
  !*** ./src/addons/modal.css ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../node_modules/css-loader??ref--5-1!../../node_modules/postcss-loader/src??postcss!./modal.css */ "./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./src/addons/modal.css");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../node_modules/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ }),

/***/ "./src/addons/modal.js":
/*!*****************************!*\
  !*** ./src/addons/modal.js ***!
  \*****************************/
/*! exports provided: createEditorModal, confirm, prompt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createEditorModal", function() { return createEditorModal; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "confirm", function() { return confirm; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prompt", function() { return prompt; });
/* harmony import */ var _components_close_button_icon_close_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/close-button/icon--close.svg */ "./src/components/close-button/icon--close.svg");
/* harmony import */ var _components_close_button_icon_close_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_components_close_button_icon_close_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _modal_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modal.css */ "./src/addons/modal.css");
/* harmony import */ var _modal_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_modal_css__WEBPACK_IMPORTED_MODULE_1__);
// Based on
// https://github.com/ScratchAddons/ScratchAddons/blob/master/addon-api/content-script/modal.js


var createEditorModal = function createEditorModal(tab, title) {
  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
      _ref$isOpen = _ref.isOpen,
      isOpen = _ref$isOpen === void 0 ? false : _ref$isOpen;

  var container = Object.assign(document.createElement('div'), {
    className: tab.scratchClass('modal_modal-overlay'),
    dir: tab.direction
  });
  container.style.display = isOpen ? '' : 'none';
  document.body.appendChild(container);
  var modal = Object.assign(document.createElement('div'), {
    className: tab.scratchClass('modal_modal-content')
  });
  modal.addEventListener('click', function (e) {
    return e.stopPropagation();
  });
  container.appendChild(modal);
  var header = Object.assign(document.createElement('div'), {
    className: tab.scratchClass('modal_header')
  });
  modal.appendChild(header);
  header.appendChild(Object.assign(document.createElement('div'), {
    className: tab.scratchClass('modal_header-item', 'modal_header-item-title'),
    innerText: title
  }));
  var closeContainer = Object.assign(document.createElement('div'), {
    className: tab.scratchClass('modal_header-item', 'modal_header-item-close')
  });
  header.appendChild(closeContainer);
  var closeButton = Object.assign(document.createElement('div'), {
    className: tab.scratchClass('close-button_close-button', 'close-button_large')
  });
  closeContainer.appendChild(closeButton);
  closeButton.appendChild(Object.assign(document.createElement('img'), {
    className: tab.scratchClass('close-button_close-icon'),
    src: _components_close_button_icon_close_svg__WEBPACK_IMPORTED_MODULE_0___default.a
  }));
  var content = Object.assign(document.createElement('div'), {
    className: _modal_css__WEBPACK_IMPORTED_MODULE_1___default.a.modalContent
  });
  modal.appendChild(content);
  return {
    container: modal,
    content: content,
    backdrop: container,
    closeButton: closeButton,
    open: function open() {
      container.style.display = '';
    },
    close: function close() {
      container.style.display = 'none';
    },
    remove: container.remove.bind(container)
  };
};

var createButtonRow = function createButtonRow(tab) {
  var buttonRow = Object.assign(document.createElement('div'), {
    className: tab.scratchClass('prompt_button-row')
  });
  var cancelButton = Object.assign(document.createElement('button'), {
    className: tab.scratchClass('prompt_cancel-button'),
    innerText: tab.scratchMessage('gui.prompt.cancel')
  });
  buttonRow.appendChild(cancelButton);
  var okButton = Object.assign(document.createElement('button'), {
    className: tab.scratchClass('prompt_ok-button'),
    innerText: tab.scratchMessage('gui.prompt.ok')
  });
  buttonRow.appendChild(okButton);
  return {
    buttonRow: buttonRow,
    cancelButton: cancelButton,
    okButton: okButton
  };
};

var confirm = function confirm(tab, title, message) {
  var _ref2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},
      _ref2$useEditorClasse = _ref2.useEditorClasses,
      useEditorClasses = _ref2$useEditorClasse === void 0 ? false : _ref2$useEditorClasse;

  var _tab$createModal = tab.createModal(title, {
    isOpen: true,
    useEditorClasses: useEditorClasses,
    useSizesClass: true
  }),
      remove = _tab$createModal.remove,
      container = _tab$createModal.container,
      content = _tab$createModal.content,
      backdrop = _tab$createModal.backdrop,
      closeButton = _tab$createModal.closeButton;

  var mode = tab.editorMode !== null && useEditorClasses ? 'editor' : tab.clientVersion;

  if (mode === 'editor') {
    container.classList.add(tab.scratchClass('prompt_modal-content'));
    content.classList.add(tab.scratchClass('prompt_body'));
  }

  content.appendChild(Object.assign(document.createElement('div'), {
    className: tab.scratchClass('prompt_label'),
    innerText: message
  }));

  var _createButtonRow = createButtonRow(tab, mode),
      buttonRow = _createButtonRow.buttonRow,
      cancelButton = _createButtonRow.cancelButton,
      okButton = _createButtonRow.okButton;

  content.appendChild(buttonRow);
  okButton.focus();
  return new Promise(function (resolve) {
    var cancel = function cancel() {
      remove();
      resolve(false);
    };

    var ok = function ok() {
      remove();
      resolve(true);
    };

    backdrop.addEventListener('click', cancel);
    closeButton.addEventListener('click', cancel);
    cancelButton.addEventListener('click', cancel);
    okButton.addEventListener('click', ok);
    container.addEventListener('keydown', function (e) {
      if (e.key === 'Enter') ok();
      if (e.key === 'Escape') cancel();
    });
  });
};
var prompt = function prompt(tab, title, message) {
  var defaultValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';

  var _ref3 = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {},
      _ref3$useEditorClasse = _ref3.useEditorClasses,
      useEditorClasses = _ref3$useEditorClasse === void 0 ? false : _ref3$useEditorClasse;

  var _tab$createModal2 = tab.createModal(title, {
    isOpen: true,
    useEditorClasses: useEditorClasses,
    useSizesClass: true
  }),
      remove = _tab$createModal2.remove,
      container = _tab$createModal2.container,
      content = _tab$createModal2.content,
      backdrop = _tab$createModal2.backdrop,
      closeButton = _tab$createModal2.closeButton;

  container.classList.add(tab.scratchClass('prompt_modal-content'));
  content.classList.add(tab.scratchClass('prompt_body'));
  content.appendChild(Object.assign(document.createElement('div'), {
    className: tab.scratchClass('prompt_label'),
    innerText: message
  }));
  var input = Object.assign(document.createElement('input'), {
    className: tab.scratchClass('prompt_variable-name-text-input'),
    value: defaultValue
  });
  content.appendChild(input);
  input.focus();
  input.select();

  var _createButtonRow2 = createButtonRow(tab),
      buttonRow = _createButtonRow2.buttonRow,
      cancelButton = _createButtonRow2.cancelButton,
      okButton = _createButtonRow2.okButton;

  content.appendChild(buttonRow);
  return new Promise(function (resolve) {
    var cancel = function cancel() {
      remove();
      resolve(null);
    };

    var ok = function ok() {
      remove();
      resolve(input.value);
    };

    backdrop.addEventListener('click', cancel);
    closeButton.addEventListener('click', cancel);
    cancelButton.addEventListener('click', cancel);
    okButton.addEventListener('click', ok);
    container.addEventListener('keydown', function (e) {
      if (e.key === 'Enter') ok();
      if (e.key === 'Escape') cancel();
    });
  });
};

/***/ }),

/***/ "./src/addons/polyfill.js":
/*!********************************!*\
  !*** ./src/addons/polyfill.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

/* eslint-disable no-extend-native */
if (!Blob.prototype.text) {
  Blob.prototype.text = function () {
    var _this = this;

    return new Promise(function (resolve, reject) {
      var fr = new FileReader();

      fr.onload = function () {
        return resolve(fr.result);
      };

      fr.onerror = function () {
        return reject(new Error('Cannot read blob as text'));
      };

      fr.readAsText(_this);
    });
  };
}

if (!Array.prototype.flat) {
  Array.prototype.flat = function () {
    var depth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
    var result = [];

    var _iterator = _createForOfIteratorHelper(this),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var i = _step.value;

        if (Array.isArray(i)) {
          if (depth < 1) {
            result.push(i);
          } else {
            var _iterator2 = _createForOfIteratorHelper(i.flat(depth - 1)),
                _step2;

            try {
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                var j = _step2.value;
                result.push(j);
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }
          }
        } else {
          result.push(i);
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    return result;
  };
}

if (typeof queueMicrotask !== 'function') {
  window.queueMicrotask = function (callback) {
    Promise.resolve().then(callback);
  };
}

/***/ })

}]);
//# sourceMappingURL=addons.js.map